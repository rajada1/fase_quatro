[{"line":2,"elements":[{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"duration":3016200,"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:26:59.038Z","before":[{"result":{"duration":150867300,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":11,"name":"Saga Step 1 - Receber OS Criada e Criar Orçamento","description":"","id":"saga-pattern---orçamento-e-pagamento;saga-step-1---receber-os-criada-e-criar-orçamento","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":992300,"status":"passed"},"line":12,"name":"que o evento \"OS_CRIADA\" foi publicado pelo OS Service","match":{"arguments":[{"val":"\"OS_CRIADA\"","offset":13}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queOEventoFoiPublicado(java.lang.String)"},"keyword":"Dado "},{"result":{"duration":17112900,"status":"passed"},"line":13,"name":"contém os dados:","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.contemOsDados(io.cucumber.datatable.DataTable)"},"rows":[{"cells":["osId","550e8400-e29b-41d4-a716-446655440000"]},{"cells":["clienteNome","Maria Santos"]},{"cells":["veiculoPlaca","XYZ-5678"]}],"keyword":"E "},{"result":{"duration":27922900,"status":"passed"},"line":17,"name":"o Billing Service recebe o evento","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.billingServiceRecebeEvento()"},"keyword":"Quando "},{"result":{"status":"passed"},"line":18,"name":"um orçamento vazio deve ser criado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umOrcamentoVazioDeveSerCriado()"},"keyword":"Então "},{"result":{"status":"passed"},"line":19,"name":"o status do orçamento deve ser \"PENDENTE\"","match":{"arguments":[{"val":"\"PENDENTE\"","offset":31}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDoOrcamentoDeveSer(java.lang.String)"},"keyword":"E "},{"result":{"duration":1003600,"status":"passed"},"line":20,"name":"o orçamento deve estar associado à OS \"550e8400-e29b-41d4-a716-446655440000\"","match":{"arguments":[{"val":"\"550e8400-e29b-41d4-a716-446655440000\"","offset":38}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveEstarAssociadoAOS(java.lang.String)"},"keyword":"E "}]},{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"duration":1010400,"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:26:59.375Z","before":[{"result":{"duration":105224400,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":22,"name":"Saga Step 2 - Receber Diagnóstico e Calcular Orçamento","description":"","id":"saga-pattern---orçamento-e-pagamento;saga-step-2---receber-diagnóstico-e-calcular-orçamento","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":9032600,"status":"passed"},"line":23,"name":"que existe um orçamento para a OS \"550e8400-e29b-41d4-a716-446655440000\"","match":{"arguments":[{"val":"\"550e8400-e29b-41d4-a716-446655440000\"","offset":34}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoParaOS(java.lang.String)"},"keyword":"Dado "},{"result":{"duration":1530200,"status":"passed"},"line":24,"name":"o evento \"DIAGNOSTICO_CONCLUIDO\" foi publicado","match":{"arguments":[{"val":"\"DIAGNOSTICO_CONCLUIDO\"","offset":9}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oEventoFoiPublicado(java.lang.String)"},"keyword":"E "},{"result":{"duration":2010800,"status":"passed"},"line":25,"name":"contém:","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.contem(io.cucumber.datatable.DataTable)"},"rows":[{"cells":["osId","550e8400-e29b-41d4-a716-446655440000"]},{"cells":["valorEstimado","1500.00"]},{"cells":["descricao","Troca de óleo e filtros"]}],"keyword":"E "},{"result":{"duration":32717000,"status":"passed"},"line":29,"name":"o Billing Service processa o diagnóstico","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.billingServiceProcessaDiagnostico()"},"keyword":"Quando "},{"result":{"duration":511900,"status":"passed"},"line":30,"name":"o orçamento deve ser atualizado com valor \"1500.00\"","match":{"arguments":[{"val":"\"1500.00\"","offset":42}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveSerAtualizadoComValor(java.lang.String)"},"keyword":"Então "},{"result":{"duration":1012600,"status":"passed"},"line":31,"name":"o status deve mudar para \"PENDENTE\"","match":{"arguments":[{"val":"\"PENDENTE\"","offset":25}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)"},"keyword":"E "},{"result":{"status":"passed"},"line":32,"name":"o evento \"ORCAMENTO_PRONTO\" deve ser publicado","match":{"arguments":[{"val":"\"ORCAMENTO_PRONTO\"","offset":9}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)"},"keyword":"E "}]},{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"duration":1001100,"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:26:59.584Z","before":[{"result":{"duration":105840300,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":34,"name":"Saga Step 3 - Cliente Aprova Orçamento","description":"","id":"saga-pattern---orçamento-e-pagamento;saga-step-3---cliente-aprova-orçamento","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":7784100,"status":"passed"},"line":35,"name":"que existe um orçamento com status \"PENDENTE\"","match":{"arguments":[{"val":"\"PENDENTE\"","offset":35}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)"},"keyword":"Dado "},{"result":{"duration":999200,"status":"passed"},"line":36,"name":"o valor total é \"1500.00\"","match":{"arguments":[{"val":"\"1500.00\"","offset":16}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.valorTotalE(java.lang.String)"},"keyword":"E "},{"result":{"duration":11590100,"status":"passed"},"line":37,"name":"o cliente aprova o orçamento via API","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.clienteAprovaOrcamentoViaAPI()"},"keyword":"Quando "},{"result":{"duration":507200,"status":"passed"},"line":38,"name":"o status deve mudar para \"APROVADO\"","match":{"arguments":[{"val":"\"APROVADO\"","offset":25}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)"},"keyword":"Então "},{"result":{"status":"passed"},"line":39,"name":"o evento \"ORCAMENTO_APROVADO\" deve ser publicado","match":{"arguments":[{"val":"\"ORCAMENTO_APROVADO\"","offset":9}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)"},"keyword":"E "},{"result":{"duration":841400,"status":"passed"},"line":40,"name":"o OS Service deve receber o evento","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.osServiceDeveReceberEvento()"},"keyword":"E "},{"result":{"status":"passed"},"line":41,"name":"o Execution Service deve receber o evento","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.executionServiceDeveReceberEvento()"},"keyword":"E "}]},{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:26:59.760Z","before":[{"result":{"duration":108169300,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":43,"name":"Saga Step 4 - Processar Pagamento","description":"","id":"saga-pattern---orçamento-e-pagamento;saga-step-4---processar-pagamento","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":8117700,"status":"passed"},"line":44,"name":"que existe um orçamento aprovado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()"},"keyword":"Dado "},{"result":{"duration":998300,"status":"passed"},"line":45,"name":"a execução foi concluída","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aExecucaoFoiConcluida()"},"keyword":"E "},{"result":{"status":"passed"},"line":46,"name":"o pagamento é processado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oPagamentoEProcessado()"},"keyword":"Quando "},{"result":{"duration":1000600,"status":"passed"},"line":47,"name":"o status do pagamento deve ser \"CONFIRMADO\"","match":{"arguments":[{"val":"\"CONFIRMADO\"","offset":31}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDoPagamentoDeveSer(java.lang.String)"},"keyword":"Então "},{"result":{"status":"passed"},"line":48,"name":"o evento \"PAGAMENTO_CONFIRMADO\" deve ser publicado","match":{"arguments":[{"val":"\"PAGAMENTO_CONFIRMADO\"","offset":9}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)"},"keyword":"E "},{"result":{"duration":1002500,"status":"passed"},"line":49,"name":"a data de pagamento deve estar registrada","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.dataDePagamentoDeveEstarRegistrada()"},"keyword":"E "}]},{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"duration":999700,"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:26:59.923Z","before":[{"result":{"duration":109258400,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":51,"name":"Compensação - OS Cancelada","description":"","id":"saga-pattern---orçamento-e-pagamento;compensação---os-cancelada","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":15070300,"status":"passed"},"line":52,"name":"que existe um orçamento com status \"PENDENTE\"","match":{"arguments":[{"val":"\"PENDENTE\"","offset":35}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)"},"keyword":"Dado "},{"result":{"duration":14072200,"status":"passed"},"line":53,"name":"o orçamento está associado à OS \"550e8400-e29b-41d4-a716-446655440000\"","match":{"arguments":[{"val":"\"550e8400-e29b-41d4-a716-446655440000\"","offset":32}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoEstaAssociadoAOS(java.lang.String)"},"keyword":"E "},{"result":{"duration":11040800,"status":"passed"},"line":54,"name":"o evento \"OS_CANCELADA\" é recebido","match":{"arguments":[{"val":"\"OS_CANCELADA\"","offset":9}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebido(java.lang.String)"},"keyword":"Quando "},{"result":{"duration":998700,"status":"passed"},"line":55,"name":"o orçamento deve mudar para status \"CANCELADO\"","match":{"arguments":[{"val":"\"CANCELADO\"","offset":35}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.o_orçamento_deve_mudar_para_status(java.lang.String)"},"keyword":"Então "},{"result":{"status":"passed"},"line":56,"name":"nenhum evento adicional deve ser publicado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumEventoAdicionalDeveSerPublicado()"},"keyword":"E "}]},{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"duration":2517000,"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"duration":2001900,"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:27:00.149Z","before":[{"result":{"duration":109721600,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":58,"name":"Compensação - Execução Falhou","description":"","id":"saga-pattern---orçamento-e-pagamento;compensação---execução-falhou","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":6036500,"status":"passed"},"line":59,"name":"que existe um orçamento aprovado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()"},"keyword":"Dado "},{"result":{"duration":1001900,"status":"passed"},"line":60,"name":"o pagamento ainda não foi processado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oPagamentoAindaNaoFoiProcessado()"},"keyword":"E "},{"result":{"duration":11072500,"status":"passed"},"line":61,"name":"o evento \"EXECUCAO_FALHOU\" é recebido","match":{"arguments":[{"val":"\"EXECUCAO_FALHOU\"","offset":9}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebido(java.lang.String)"},"keyword":"Quando "},{"result":{"status":"passed"},"line":62,"name":"o orçamento deve mudar para status \"CANCELADO\"","match":{"arguments":[{"val":"\"CANCELADO\"","offset":35}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.o_orçamento_deve_mudar_para_status(java.lang.String)"},"keyword":"Então "},{"result":{"duration":1003500,"status":"passed"},"line":63,"name":"nenhuma cobrança deve ser feita","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumaCobrancaDeveSerFeita()"},"keyword":"E "}]},{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"duration":998600,"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:27:00.368Z","before":[{"result":{"duration":111016200,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":65,"name":"Idempotência - Evento Duplicado de OS_CRIADA","description":"","id":"saga-pattern---orçamento-e-pagamento;idempotência---evento-duplicado-de-os-criada","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":5519700,"status":"passed"},"line":66,"name":"que já existe um orçamento para a OS \"550e8400-e29b-41d4-a716-446655440000\"","match":{"arguments":[{"val":"\"550e8400-e29b-41d4-a716-446655440000\"","offset":37}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queJaExisteUmOrcamentoParaOS(java.lang.String)"},"keyword":"Dado "},{"result":{"duration":10035400,"status":"passed"},"line":67,"name":"o evento \"OS_CRIADA\" é recebido novamente para a mesma OS","match":{"arguments":[{"val":"\"OS_CRIADA\"","offset":9}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebidoNovamenteParaMesmaOS(java.lang.String)"},"keyword":"Quando "},{"result":{"status":"passed"},"line":68,"name":"o evento deve ser ignorado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerIgnorado()"},"keyword":"Então "},{"result":{"duration":8054700,"status":"passed"},"line":69,"name":"nenhum novo orçamento deve ser criado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumNovoOrcamentoDeveSerCriado()"},"keyword":"E "},{"result":{"status":"passed"},"line":70,"name":"um log de duplicata deve ser registrado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umLogDeDuplicataDeveSerRegistrado()"},"keyword":"E "}]},{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"duration":998000,"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:27:00.549Z","before":[{"result":{"duration":124845100,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":72,"name":"Validação - Orçamento Rejeitado pelo Cliente","description":"","id":"saga-pattern---orçamento-e-pagamento;validação---orçamento-rejeitado-pelo-cliente","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":31123200,"status":"passed"},"line":73,"name":"que existe um orçamento com status \"PENDENTE\"","match":{"arguments":[{"val":"\"PENDENTE\"","offset":35}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)"},"keyword":"Dado "},{"result":{"duration":16843200,"status":"passed"},"line":74,"name":"o cliente rejeita o orçamento","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.clienteRejeitaOrcamento()"},"keyword":"Quando "},{"result":{"duration":1511100,"status":"passed"},"line":75,"name":"o status deve mudar para \"REJEITADO\"","match":{"arguments":[{"val":"\"REJEITADO\"","offset":25}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)"},"keyword":"Então "},{"result":{"status":"passed"},"line":76,"name":"o evento \"ORCAMENTO_REJEITADO\" deve ser publicado","match":{"arguments":[{"val":"\"ORCAMENTO_REJEITADO\"","offset":9}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)"},"keyword":"E "},{"result":{"duration":1011300,"status":"passed"},"line":77,"name":"o motivo da rejeição deve estar registrado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.motivoDaRejeicaoDeveEstarRegistrado()"},"keyword":"E "}]},{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"duration":1001100,"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:27:00.771Z","before":[{"result":{"duration":117530900,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":79,"name":"Validação - Falha no Pagamento","description":"","id":"saga-pattern---orçamento-e-pagamento;validação---falha-no-pagamento","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":7557000,"status":"passed"},"line":80,"name":"que existe um orçamento aprovado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()"},"keyword":"Dado "},{"result":{"duration":998300,"status":"passed"},"line":81,"name":"a execução foi concluída","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aExecucaoFoiConcluida()"},"keyword":"E "},{"result":{"status":"passed"},"line":82,"name":"o processamento de pagamento falha","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oProcessamentoDePagamentoFalha()"},"keyword":"Quando "},{"result":{"status":"passed"},"line":83,"name":"o evento \"PAGAMENTO_FALHOU\" deve ser publicado","match":{"arguments":[{"val":"\"PAGAMENTO_FALHOU\"","offset":9}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)"},"keyword":"Então "},{"result":{"status":"passed"},"line":84,"name":"o orçamento deve manter o status \"APROVADO\"","match":{"arguments":[{"val":"\"APROVADO\"","offset":33}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveManterOStatus(java.lang.String)"},"keyword":"E "},{"result":{"status":"passed"},"line":85,"name":"o motivo da falha deve estar registrado","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.motivoDaFalhaDeveEstarRegistrado()"},"keyword":"E "},{"result":{"status":"passed"},"line":86,"name":"um alerta deve ser enviado para o gerente","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umAlertaDeveSerEnviadoParaOGerente()"},"keyword":"E "}]},{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"duration":3011400,"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"duration":1511500,"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:27:00.944Z","before":[{"result":{"duration":142589600,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":88,"name":"Histórico - Rastreamento de Mudanças de Status","description":"","id":"saga-pattern---orçamento-e-pagamento;histórico---rastreamento-de-mudanças-de-status","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":6530800,"status":"passed"},"line":89,"name":"que um orçamento passou por todo o ciclo","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queUmOrcamentoPassouPorTodoCiclo()"},"keyword":"Dado "},{"result":{"status":"passed"},"line":90,"name":"eu consulto o histórico do orçamento","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.euConsultoOHistoricoDoOrcamento()"},"keyword":"Quando "},{"result":{"duration":998900,"status":"passed"},"line":91,"name":"deve haver registros de:","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.deveHaverRegistrosDe(io.cucumber.datatable.DataTable)"},"rows":[{"cells":["statusAnterior","statusNovo","motivo"]},{"cells":["null","PENDENTE","Orçamento criado"]},{"cells":["PENDENTE","PENDENTE","Diagnóstico recebido"]},{"cells":["PENDENTE","APROVADO","Cliente aprovou"]},{"cells":["APROVADO","CONFIRMADO","Pagamento processado"]}],"keyword":"Então "},{"result":{"duration":1002200,"status":"passed"},"line":97,"name":"cada registro deve ter timestamp","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.cadaRegistroDeveTerTimestamp()"},"keyword":"E "}]},{"line":7,"name":"","description":"","type":"background","keyword":"Contexto","steps":[{"result":{"status":"passed"},"line":8,"name":"que o Billing Service está disponível","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()"},"keyword":"Dado "},{"result":{"status":"passed"},"line":9,"name":"a fila \"billing-events-queue\" está configurada","match":{"arguments":[{"val":"\"billing-events-queue\"","offset":7}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)"},"keyword":"E "}]},{"start_timestamp":"2026-02-09T23:27:01.137Z","before":[{"result":{"duration":108364800,"status":"passed"},"match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.setUp()"}}],"line":99,"name":"Saga Completo - Happy Path do Billing","description":"","id":"saga-pattern---orçamento-e-pagamento;saga-completo---happy-path-do-billing","type":"scenario","keyword":"Cenário","steps":[{"result":{"duration":5039100,"status":"passed"},"line":100,"name":"que o evento \"OS_CRIADA\" foi recebido","match":{"arguments":[{"val":"\"OS_CRIADA\"","offset":13}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queOEventoFoiRecebido(java.lang.String)"},"keyword":"Dado "},{"result":{"duration":10558800,"status":"passed"},"line":101,"name":"todos os passos do Saga são executados com sucesso:","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.todosOsPassosDoSagaSaoExecutadosComSucesso(io.cucumber.datatable.DataTable)"},"rows":[{"cells":["passo","evento","status_resultado"]},{"cells":["1","OS_CRIADA","PENDENTE"]},{"cells":["2","DIAGNOSTICO_CONCLUIDO","PENDENTE"]},{"cells":["3","Cliente aprova","APROVADO"]},{"cells":["4","EXECUCAO_FINALIZADA","APROVADO"]},{"cells":["5","Processar pagamento","CONFIRMADO"]}],"keyword":"Quando "},{"result":{"status":"passed"},"line":108,"name":"o orçamento deve estar com status \"CONFIRMADO\"","match":{"arguments":[{"val":"\"CONFIRMADO\"","offset":34}],"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveEstarComStatus(java.lang.String)"},"keyword":"Então "},{"result":{"duration":1002000,"status":"passed"},"line":109,"name":"todos os eventos devem ter sido publicados","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.todosOsEventosDevemTerSidoPublicados()"},"keyword":"E "},{"result":{"status":"passed"},"line":110,"name":"nenhuma compensação deve ter sido acionada","match":{"location":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumaCompensacaoDeveTerSidoAcionada()"},"keyword":"E "}]}],"name":"Saga Pattern - Orçamento e Pagamento","description":"  Como Billing Service\n  Eu quero gerenciar orçamentos e pagamentos\n  Para coordenar transações financeiras no fluxo Saga","id":"saga-pattern---orçamento-e-pagamento","keyword":"Funcionalidade","uri":"classpath:features/saga_orcamento.feature","tags":[]}]