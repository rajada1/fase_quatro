[INFO] Scanning for projects...
[INFO] 
[INFO] -------------------< br.com.grupo99:billing-service >-------------------
[INFO] Building billing-service 1.0.0-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- clean:3.3.2:clean (default-clean) @ billing-service ---
[INFO] Deleting C:\Users\Meu Computador\OneDrive\┴rea de Trabalho\FIAP\projeto\fase_quatro\oficina-billing-service\target
[INFO] 
[INFO] --- jacoco:0.8.11:prepare-agent (default) @ billing-service ---
[INFO] argLine set to "-javaagent:C:\\Users\\Meu Computador\\.m2\\repository\\org\\jacoco\\org.jacoco.agent\\0.8.11\\org.jacoco.agent-0.8.11-runtime.jar=destfile=C:\\Users\\Meu Computador\\OneDrive\\┴rea de Trabalho\\FIAP\\projeto\\fase_quatro\\oficina-billing-service\\target\\jacoco.exec,excludes=**/*Application.class:**/domain/repository/*.class:**/infrastructure/messaging/*.class:**/infrastructure/config/*.class"
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ billing-service ---
[INFO] Copying 1 resource from src\main\resources to target\classes
[INFO] Copying 2 resources from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ billing-service ---
[INFO] Changes detected - recompiling the module! :source
[INFO] Compiling 39 source files with javac [debug release 21] to target\classes
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ billing-service ---
[INFO] Copying 2 resources from src\test\resources to target\test-classes
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ billing-service ---
[INFO] Changes detected - recompiling the module! :dependency
[INFO] Compiling 5 source files with javac [debug release 21] to target\test-classes
[INFO] 
[INFO] --- surefire:3.0.0:test (default-test) @ billing-service ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running br.com.grupo99.billingservice.domain.model.OrcamentoTest
[INFO] Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.24 s - in br.com.grupo99.billingservice.domain.model.OrcamentoTest
[INFO] Running br.com.grupo99.billingservice.domain.model.PagamentoTest
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.042 s - in br.com.grupo99.billingservice.domain.model.PagamentoTest
[INFO] Running br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest
{"timestamp":"2026-02-01T18:40:12.1181412-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest]: OrcamentoRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:12.5615614-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:12.7627987-03:00","@version":"1","message":"Image pull policy will be performed by: DefaultPullPolicy()","logger":"org.testcontainers.images.PullPolicy","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:12.7771906-03:00","@version":"1","message":"Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')","logger":"org.testcontainers.utility.ImageNameSubstitutor","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:13.9554022-03:00","@version":"1","message":"Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first","logger":"org.testcontainers.dockerclient.DockerClientProviderStrategy","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:15.1879617-03:00","@version":"1","message":"Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)","logger":"org.testcontainers.dockerclient.DockerClientProviderStrategy","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:15.1913565-03:00","@version":"1","message":"Docker host IP address is localhost","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:15.2290681-03:00","@version":"1","message":"Connected to docker: \n  Server Version: 28.5.1\n  API Version: 1.51\n  Operating System: Docker Desktop\n  Total Memory: 32084 MB","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:15.335625-03:00","@version":"1","message":"Creating container for image: testcontainers/ryuk:0.5.1","logger":"tc.testcontainers/ryuk:0.5.1","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:15.7261803-03:00","@version":"1","message":"Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/","logger":"org.testcontainers.utility.RegistryAuthLocator","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:15.9749336-03:00","@version":"1","message":"Container testcontainers/ryuk:0.5.1 is starting: d307a64513fbadf52ffe353779654631029aae46cd5a7a0d228299f4a8f7cedf","logger":"tc.testcontainers/ryuk:0.5.1","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:16.5445279-03:00","@version":"1","message":"Container testcontainers/ryuk:0.5.1 started in PT1.2089029S","logger":"tc.testcontainers/ryuk:0.5.1","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:16.556633-03:00","@version":"1","message":"Ryuk started - will monitor and terminate Testcontainers containers on JVM exit","logger":"org.testcontainers.utility.RyukResourceReaper","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:16.5571434-03:00","@version":"1","message":"Checking the system...","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:16.5587909-03:00","@version":"1","message":"?? Docker server version should be at least 1.6.0","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:16.5610175-03:00","@version":"1","message":"Creating container for image: mongo:7.0","logger":"tc.mongo:7.0","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:16.6265987-03:00","@version":"1","message":"Container mongo:7.0 is starting: 4137e18650d81689e2f9911bafc98e71357aaf4d5bbf457944f92a2fd09c7a27","logger":"tc.mongo:7.0","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:17.669561-03:00","@version":"1","message":"Container mongo:7.0 started in PT1.1085435S","logger":"tc.mongo:7.0","thread":"main","level":"INFO","level_value":20000}

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::               (v3.3.13)

{"timestamp":"2026-02-01T18:40:20.382521-03:00","@version":"1","message":"Starting OrcamentoRepositoryTest using Java 21.0.9 with PID 28328 (started by Meu Computador in C:\\Users\\Meu Computador\\OneDrive\\┴rea de Trabalho\\FIAP\\projeto\\fase_quatro\\oficina-billing-service)","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:20.384025-03:00","@version":"1","message":"Running with Spring Boot v3.3.13, Spring v6.1.21","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:20.3850346-03:00","@version":"1","message":"No active profile set, falling back to 1 default profile: \"default\"","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:21.8412912-03:00","@version":"1","message":"Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:22.0058739-03:00","@version":"1","message":"Finished Spring Data repository scanning in 150 ms. Found 2 MongoDB repository interfaces.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:22.7647729-03:00","@version":"1","message":"MongoClient with metadata {\"driver\": {\"name\": \"mongo-java-driver|sync|spring-boot\", \"version\": \"5.0.1\"}, \"os\": {\"type\": \"Windows\", \"name\": \"Windows 11\", \"architecture\": \"amd64\", \"version\": \"10.0\"}, \"platform\": \"Java/Oracle Corporation/21.0.9+7-LTS-338\"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@708a0150, com.mongodb.Jep395RecordCodecProvider@7a282bad, com.mongodb.KotlinCodecProvider@195b4f4f]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:52266], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}","logger":"org.mongodb.driver.client","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:22.7948467-03:00","@version":"1","message":"Monitor thread successfully connected to server with description ServerDescription{address=localhost:52266, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=21, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=62664700, setName='docker-rs', canonicalAddress=4137e18650d8:27017, hosts=[4137e18650d8:27017], passives=[], arbiters=[], primary='4137e18650d8:27017', tagSet=TagSet{[]}, electionId=7fffffff0000000000000001, setVersion=1, topologyVersion=TopologyVersion{processId=697fc8acf9ca9add52f255b9, counter=6}, lastWriteDate=Sun Feb 01 18:42:05 BRT 2026, lastUpdateTimeNanos=7203507724900}","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='697fc846f140fd5a9a33c01c', description='null'}-localhost:52266","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:23.4515259-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$HistoricoStatusEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:23.4515259-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.PagamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:23.4780159-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:23.4822515-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$ItemOrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:24.0671473-03:00","@version":"1","message":"Started OrcamentoRepositoryTest in 4.744 seconds (process running for 18.09)","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"INFO","level_value":20000}
Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
WARNING: A Java agent has been loaded dynamically (C:\Users\Meu Computador\.m2\repository\net\bytebuddy\byte-buddy-agent\1.14.19\byte-buddy-agent-1.14.19.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
{"timestamp":"2026-02-01T18:40:26.3339134-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.4727754-03:00","@version":"1","message":"Salvando orcamento: a3b1eba5-759a-4501-8f49-accd8da5fdee","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.6743992-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.7416061-03:00","@version":"1","message":"Buscando orcamento por osId: c8e16565-d727-4563-85bb-ea8dbf8d4e11","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.7742808-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"c8e16565-d727-4563-85bb-ea8dbf8d4e11\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.8019344-03:00","@version":"1","message":"find using query: { \"osId\" : \"c8e16565-d727-4563-85bb-ea8dbf8d4e11\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9024012-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9096608-03:00","@version":"1","message":"Salvando orcamento: 09e81e8c-8a07-4839-82ef-3803c376e805","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9117326-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9184384-03:00","@version":"1","message":"Salvando orcamento: 50d83beb-a7bd-4f01-af5d-44666760c1ae","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9221625-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, dataAprovacao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9292027-03:00","@version":"1","message":"Salvando orcamento: 1fd7390a-b37e-47e6-a0d5-57ba0c53458f","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9312115-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, dataAprovacao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9377604-03:00","@version":"1","message":"Buscando orcamentos por status: PENDENTE","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9393885-03:00","@version":"1","message":"Created query Query: { \"status\" : \"PENDENTE\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9424778-03:00","@version":"1","message":"find using query: { \"status\" : \"PENDENTE\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9476008-03:00","@version":"1","message":"Buscando orcamentos por status: APROVADO","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.948173-03:00","@version":"1","message":"Created query Query: { \"status\" : \"APROVADO\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9491977-03:00","@version":"1","message":"find using query: { \"status\" : \"APROVADO\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9642791-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.975234-03:00","@version":"1","message":"Salvando orcamento: 8f5950a1-b32d-4f42-a77c-804b23b11f6e","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:26.9836819-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0020437-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0108719-03:00","@version":"1","message":"Salvando orcamento: 36e8d110-09db-4455-b439-b62491181856","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0124956-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0181293-03:00","@version":"1","message":"Salvando orcamento: 36e8d110-09db-4455-b439-b62491181856","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0194838-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, dataAprovacao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0323124-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0427792-03:00","@version":"1","message":"Salvando orcamento: f7fc58cc-5f10-4ef4-a0db-d6eb505f2249","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0441613-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0501904-03:00","@version":"1","message":"Verificando existÛncia de orcamento para osId: 7266c907-7a6d-4f3e-9618-356e5c31363f","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0515005-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"7266c907-7a6d-4f3e-9618-356e5c31363f\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0563126-03:00","@version":"1","message":"Executing count: { \"osId\" : \"7266c907-7a6d-4f3e-9618-356e5c31363f\"} in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0751854-03:00","@version":"1","message":"Verificando existÛncia de orcamento para osId: 50fafb6b-ff46-4bd4-9e41-631ef179fb73","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0759217-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"50fafb6b-ff46-4bd4-9e41-631ef179fb73\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.0772547-03:00","@version":"1","message":"Executing count: { \"osId\" : \"50fafb6b-ff46-4bd4-9e41-631ef179fb73\"} in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:27.144685-03:00","@version":"1","message":"Exception in monitor thread while connecting to server localhost:52266","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='697fc846f140fd5a9a33c01c', description='null'}-localhost:52266","level":"INFO","level_value":20000,"stack_trace":"com.mongodb.MongoSocketReadException: Prematurely reached end of stream\r\n\tat com.mongodb.internal.connection.SocketStream.read(SocketStream.java:178)\r\n\tat com.mongodb.internal.connection.SocketStream.read(SocketStream.java:196)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:716)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:580)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:428)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:381)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:221)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:153)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n"}
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 17.716 s - in br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest
[INFO] Running br.com.grupo99.billingservice.bdd.CucumberTest
{"timestamp":"2026-02-01T18:40:28.9557326-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:29.0112-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::               (v3.3.13)

{"timestamp":"2026-02-01T18:40:29.1375933-03:00","@version":"1","message":"Starting SagaOrcamentoSteps using Java 21.0.9 with PID 28328 (started by Meu Computador in C:\\Users\\Meu Computador\\OneDrive\\┴rea de Trabalho\\FIAP\\projeto\\fase_quatro\\oficina-billing-service)","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:29.1375933-03:00","@version":"1","message":"Running with Spring Boot v3.3.13, Spring v6.1.21","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:29.1381042-03:00","@version":"1","message":"The following 1 profile is active: \"test\"","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:31.0174759-03:00","@version":"1","message":"Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:31.0653759-03:00","@version":"1","message":"Finished Spring Data repository scanning in 47 ms. Found 2 MongoDB repository interfaces.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:33.1765353-03:00","@version":"1","message":"MongoClient with metadata {\"driver\": {\"name\": \"mongo-java-driver|sync|spring-boot\", \"version\": \"5.0.1\"}, \"os\": {\"type\": \"Windows\", \"name\": \"Windows 11\", \"architecture\": \"amd64\", \"version\": \"10.0\"}, \"platform\": \"Java/Oracle Corporation/21.0.9+7-LTS-338\"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@6cd8046e], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@708a0150, com.mongodb.Jep395RecordCodecProvider@7a282bad, com.mongodb.KotlinCodecProvider@195b4f4f]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@4b2c2934], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}","logger":"org.mongodb.driver.client","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:33.1775341-03:00","@version":"1","message":"Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=27, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=4133500}","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='697fc851f140fd5a9a33c01d', description='null'}-localhost:27017","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:33.3319419-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$ItemOrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:33.3334767-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.PagamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:33.334489-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$HistoricoStatusEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:33.334489-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:37.1761116-03:00","@version":"1","message":"Exception in monitor thread while connecting to server localhost:52266","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='697fc846f140fd5a9a33c01c', description='null'}-localhost:52266","level":"INFO","level_value":20000,"stack_trace":"com.mongodb.MongoSocketOpenException: Exception opening socket\r\n\tat com.mongodb.internal.connection.SocketStream.lambda$open$0(SocketStream.java:86)\r\n\tat java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n\tat com.mongodb.internal.connection.SocketStream.open(SocketStream.java:86)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:201)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:153)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: java.net.ConnectException: Connection refused: getsockopt\r\n\tat java.base/sun.nio.ch.Net.pollConnect(Native Method)\r\n\tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)\r\n\tat java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)\r\n\tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)\r\n\tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n\tat java.base/java.net.Socket.connect(Socket.java:751)\r\n\tat com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:76)\r\n\tat com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:105)\r\n\tat com.mongodb.internal.connection.SocketStream.open(SocketStream.java:80)\r\n\t... 4 common frames omitted\r\n"}
{"timestamp":"2026-02-01T18:40:39.3652648-03:00","@version":"1","message":"Exposing 0 endpoints beneath base path '/actuator'","logger":"org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:39.5549955-03:00","@version":"1","message":"Started SagaOrcamentoSteps in 10.514 seconds (process running for 33.574)","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:39.6901543-03:00","@version":"1","message":"Erro ao consumir mensagens do SQS (OS): Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null","logger":"br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener","thread":"scheduling-1","level":"ERROR","level_value":40000,"stack_trace":"java.lang.NullPointerException: Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null\r\n\tat br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener.consumeOSEvents(BillingEventListener.java:68)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:499)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n"}
{"timestamp":"2026-02-01T18:40:39.6941625-03:00","@version":"1","message":"Erro ao consumir mensagens do SQS (Execution): Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null","logger":"br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener","thread":"scheduling-1","level":"ERROR","level_value":40000,"stack_trace":"java.lang.NullPointerException: Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null\r\n\tat br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener.consumeExecutionEvents(BillingEventListener.java:101)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:499)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n"}

Cenßrio: Saga Step 1 - Receber OS Criada e Criar Orþamento                       # features/saga_orcamento.feature:11
{"timestamp":"2026-02-01T18:40:39.9573826-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
  Dado que o evento "OS_CRIADA" foi publicado pelo OS Service                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queOEventoFoiPublicado(java.lang.String)
  E contÚm os dados:                                                             # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.contemOsDados(io.cucumber.datatable.DataTable)
    | osId         | 550e8400-e29b-41d4-a716-446655440000 |
    | clienteNome  | Maria Santos                         |
    | veiculoPlaca | XYZ-5678                             |
{"timestamp":"2026-02-01T18:40:40.113018-03:00","@version":"1","message":"Salvando orcamento: 746d8437-473f-463e-9532-024c5f4102d2","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.1321973-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o Billing Service recebe o evento                                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.billingServiceRecebeEvento()
  EntÒo um orþamento vazio deve ser criado                                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umOrcamentoVazioDeveSerCriado()
  E o status do orþamento deve ser "PENDENTE"                                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDoOrcamentoDeveSer(java.lang.String)
  E o orþamento deve estar associado Ó OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveEstarAssociadoAOS(java.lang.String)
{"timestamp":"2026-02-01T18:40:40.1492627-03:00","@version":"1","message":"Finished test case Saga Step 1 - Receber OS Criada e Criar Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.1556497-03:00","@version":"1","message":"Executing test case Saga Step 2 - Receber Diagn¾stico e Calcular Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.1591707-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:40.16219-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Step 2 - Receber Diagn¾stico e Calcular Orþamento                 # features/saga_orcamento.feature:22
{"timestamp":"2026-02-01T18:40:40.1912941-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                              # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T18:40:40.3106242-03:00","@version":"1","message":"Salvando orcamento: 761e73f2-f77a-4115-939d-71873d1a6f1e","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.3127963-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento para a OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoParaOS(java.lang.String)
  E o evento "DIAGNOSTICO_CONCLUIDO" foi publicado                              # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oEventoFoiPublicado(java.lang.String)
  E contÚm:                                                                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.contem(io.cucumber.datatable.DataTable)
    | osId          | 550e8400-e29b-41d4-a716-446655440000 |
    | valorEstimado | 1500.00                              |
    | descricao     | Troca de ¾leo e filtros              |
{"timestamp":"2026-02-01T18:40:40.3207582-03:00","@version":"1","message":"Buscando orcamento por id: 761e73f2-f77a-4115-939d-71873d1a6f1e","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.324553-03:00","@version":"1","message":"findOne using query: { \"id\" : \"761e73f2-f77a-4115-939d-71873d1a6f1e\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.3442712-03:00","@version":"1","message":"Salvando orcamento: 761e73f2-f77a-4115-939d-71873d1a6f1e","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.346688-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o Billing Service processa o diagn¾stico                               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.billingServiceProcessaDiagnostico()
  EntÒo o orþamento deve ser atualizado com valor "1500.00"                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveSerAtualizadoComValor(java.lang.String)
  E o status deve mudar para "PENDENTE"                                         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)
  E o evento "ORCAMENTO_PRONTO" deve ser publicado                              # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
{"timestamp":"2026-02-01T18:40:40.3596803-03:00","@version":"1","message":"Finished test case Saga Step 2 - Receber Diagn¾stico e Calcular Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.3607706-03:00","@version":"1","message":"Executing test case Saga Step 3 - Cliente Aprova Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.3633113-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:40.366402-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Step 3 - Cliente Aprova Orþamento      # features/saga_orcamento.feature:34
{"timestamp":"2026-02-01T18:40:40.3936842-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada   # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T18:40:40.5133664-03:00","@version":"1","message":"Salvando orcamento: 0a88a52f-e3a3-4a0d-b110-1604bd1e25d9","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.5143652-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento com status "PENDENTE" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)
  E o valor total Ú "1500.00"                        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.valorTotalE(java.lang.String)
{"timestamp":"2026-02-01T18:40:40.5193948-03:00","@version":"1","message":"Buscando orcamento por id: 0a88a52f-e3a3-4a0d-b110-1604bd1e25d9","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.5219224-03:00","@version":"1","message":"findOne using query: { \"id\" : \"0a88a52f-e3a3-4a0d-b110-1604bd1e25d9\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.5263812-03:00","@version":"1","message":"Salvando orcamento: 0a88a52f-e3a3-4a0d-b110-1604bd1e25d9","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.5268915-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o cliente aprova o orþamento via API        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.clienteAprovaOrcamentoViaAPI()
  EntÒo o status deve mudar para "APROVADO"          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)
  E o evento "ORCAMENTO_APROVADO" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E o OS Service deve receber o evento               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.osServiceDeveReceberEvento()
  E o Execution Service deve receber o evento        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.executionServiceDeveReceberEvento()
{"timestamp":"2026-02-01T18:40:40.5369535-03:00","@version":"1","message":"Finished test case Saga Step 3 - Cliente Aprova Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.5379663-03:00","@version":"1","message":"Executing test case Saga Step 4 - Processar Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.5394759-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:40.5422877-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Step 4 - Processar Pagamento             # features/saga_orcamento.feature:43
{"timestamp":"2026-02-01T18:40:40.5629041-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T18:40:40.681554-03:00","@version":"1","message":"Salvando orcamento: ad8549fc-b852-4450-9d26-6f6c40b88c9d","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.6835616-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento aprovado                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()
  E a execuþÒo foi concluÝda                           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aExecucaoFoiConcluida()
  Quando o pagamento Ú processado                      # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oPagamentoEProcessado()
  EntÒo o status do pagamento deve ser "CONFIRMADO"    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDoPagamentoDeveSer(java.lang.String)
  E o evento "PAGAMENTO_CONFIRMADO" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E a data de pagamento deve estar registrada          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.dataDePagamentoDeveEstarRegistrada()
{"timestamp":"2026-02-01T18:40:40.6946374-03:00","@version":"1","message":"Finished test case Saga Step 4 - Processar Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.6966398-03:00","@version":"1","message":"Executing test case CompensaþÒo - OS Cancelada","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.6991494-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:40.7016734-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: CompensaþÒo - OS Cancelada                                        # features/saga_orcamento.feature:51
{"timestamp":"2026-02-01T18:40:40.7200681-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T18:40:40.840658-03:00","@version":"1","message":"Salvando orcamento: a1384032-cc90-4eea-9b56-a33e7f2f3606","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.8426566-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento com status "PENDENTE"                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)
{"timestamp":"2026-02-01T18:40:40.8471645-03:00","@version":"1","message":"Buscando orcamento por id: a1384032-cc90-4eea-9b56-a33e7f2f3606","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.8471645-03:00","@version":"1","message":"findOne using query: { \"id\" : \"a1384032-cc90-4eea-9b56-a33e7f2f3606\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.8502485-03:00","@version":"1","message":"Salvando orcamento: a1384032-cc90-4eea-9b56-a33e7f2f3606","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.8511947-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  E o orþamento estß associado Ó OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoEstaAssociadoAOS(java.lang.String)
{"timestamp":"2026-02-01T18:40:40.8559065-03:00","@version":"1","message":"Buscando orcamento por id: a1384032-cc90-4eea-9b56-a33e7f2f3606","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.8574165-03:00","@version":"1","message":"findOne using query: { \"id\" : \"a1384032-cc90-4eea-9b56-a33e7f2f3606\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.8599669-03:00","@version":"1","message":"Salvando orcamento: a1384032-cc90-4eea-9b56-a33e7f2f3606","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.8609675-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o evento "OS_CANCELADA" Ú recebido                                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebido(java.lang.String)
  EntÒo o orþamento deve mudar para status "CANCELADO"                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.o_orþamento_deve_mudar_para_status(java.lang.String)
  E nenhum evento adicional deve ser publicado                             # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumEventoAdicionalDeveSerPublicado()
{"timestamp":"2026-02-01T18:40:40.8684775-03:00","@version":"1","message":"Finished test case CompensaþÒo - OS Cancelada","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.8697247-03:00","@version":"1","message":"Executing test case CompensaþÒo - ExecuþÒo Falhou","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:40.8727457-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:40.8767454-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: CompensaþÒo - ExecuþÒo Falhou                 # features/saga_orcamento.feature:58
{"timestamp":"2026-02-01T18:40:40.8943455-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T18:40:41.0140227-03:00","@version":"1","message":"Salvando orcamento: a3bec893-5f97-4052-868c-7ff2c1cb4330","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.0140227-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento aprovado                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()
  E o pagamento ainda nÒo foi processado               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oPagamentoAindaNaoFoiProcessado()
{"timestamp":"2026-02-01T18:40:41.0180839-03:00","@version":"1","message":"Buscando orcamento por id: a3bec893-5f97-4052-868c-7ff2c1cb4330","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.0190829-03:00","@version":"1","message":"findOne using query: { \"id\" : \"a3bec893-5f97-4052-868c-7ff2c1cb4330\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.0236198-03:00","@version":"1","message":"Salvando orcamento: a3bec893-5f97-4052-868c-7ff2c1cb4330","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.0246188-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o evento "EXECUCAO_FALHOU" Ú recebido         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebido(java.lang.String)
  EntÒo o orþamento deve mudar para status "CANCELADO" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.o_orþamento_deve_mudar_para_status(java.lang.String)
  E nenhuma cobranþa deve ser feita                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumaCobrancaDeveSerFeita()
{"timestamp":"2026-02-01T18:40:41.0320798-03:00","@version":"1","message":"Finished test case CompensaþÒo - ExecuþÒo Falhou","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.0335884-03:00","@version":"1","message":"Executing test case IdempotÛncia - Evento Duplicado de OS_CRIADA","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.0355986-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:41.0381148-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: IdempotÛncia - Evento Duplicado de OS_CRIADA                              # features/saga_orcamento.feature:65
{"timestamp":"2026-02-01T18:40:41.0514681-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T18:40:41.1661367-03:00","@version":"1","message":"Salvando orcamento: a2dd3bfe-2b60-4007-a248-4158641d5233","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.1671372-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que jß existe um orþamento para a OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queJaExisteUmOrcamentoParaOS(java.lang.String)
{"timestamp":"2026-02-01T18:40:41.1719687-03:00","@version":"1","message":"Buscando orcamento por osId: 550e8400-e29b-41d4-a716-446655440000","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.1739766-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.1749758-03:00","@version":"1","message":"find using query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o evento "OS_CRIADA" Ú recebido novamente para a mesma OS                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebidoNovamenteParaMesmaOS(java.lang.String)
  EntÒo o evento deve ser ignorado                                                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerIgnorado()
{"timestamp":"2026-02-01T18:40:41.1791928-03:00","@version":"1","message":"Buscando orcamento por osId: 550e8400-e29b-41d4-a716-446655440000","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.1791928-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.1803516-03:00","@version":"1","message":"find using query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  E nenhum novo orþamento deve ser criado                                          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumNovoOrcamentoDeveSerCriado()
  E um log de duplicata deve ser registrado                                        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umLogDeDuplicataDeveSerRegistrado()
{"timestamp":"2026-02-01T18:40:41.1900805-03:00","@version":"1","message":"Finished test case IdempotÛncia - Evento Duplicado de OS_CRIADA","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.1910731-03:00","@version":"1","message":"Executing test case ValidaþÒo - Orþamento Rejeitado pelo Cliente","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.1920787-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:41.1966035-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: ValidaþÒo - Orþamento Rejeitado pelo Cliente # features/saga_orcamento.feature:72
{"timestamp":"2026-02-01T18:40:41.2154571-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T18:40:41.3226958-03:00","@version":"1","message":"Salvando orcamento: f333e31b-afaa-4bdf-93a2-072ead33c517","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.324705-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento com status "PENDENTE"  # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)
{"timestamp":"2026-02-01T18:40:41.3277054-03:00","@version":"1","message":"Buscando orcamento por id: f333e31b-afaa-4bdf-93a2-072ead33c517","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.3277054-03:00","@version":"1","message":"findOne using query: { \"id\" : \"f333e31b-afaa-4bdf-93a2-072ead33c517\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.3312382-03:00","@version":"1","message":"Salvando orcamento: f333e31b-afaa-4bdf-93a2-072ead33c517","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.332748-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o cliente rejeita o orþamento                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.clienteRejeitaOrcamento()
  EntÒo o status deve mudar para "REJEITADO"          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)
  E o evento "ORCAMENTO_REJEITADO" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E o motivo da rejeiþÒo deve estar registrado        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.motivoDaRejeicaoDeveEstarRegistrado()
{"timestamp":"2026-02-01T18:40:41.3429538-03:00","@version":"1","message":"Finished test case ValidaþÒo - Orþamento Rejeitado pelo Cliente","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.3439674-03:00","@version":"1","message":"Executing test case ValidaþÒo - Falha no Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.3459687-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:41.3479657-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: ValidaþÒo - Falha no Pagamento                # features/saga_orcamento.feature:79
{"timestamp":"2026-02-01T18:40:41.3633148-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T18:40:41.4755987-03:00","@version":"1","message":"Salvando orcamento: c29005a6-2d95-4e53-9f78-76cf04531391","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.4771187-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento aprovado                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()
  E a execuþÒo foi concluÝda                           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aExecucaoFoiConcluida()
  Quando o processamento de pagamento falha            # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oProcessamentoDePagamentoFalha()
  EntÒo o evento "PAGAMENTO_FALHOU" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E o orþamento deve manter o status "APROVADO"        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveManterOStatus(java.lang.String)
  E o motivo da falha deve estar registrado            # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.motivoDaFalhaDeveEstarRegistrado()
  E um alerta deve ser enviado para o gerente          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umAlertaDeveSerEnviadoParaOGerente()
{"timestamp":"2026-02-01T18:40:41.4855254-03:00","@version":"1","message":"Finished test case ValidaþÒo - Falha no Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.4865241-03:00","@version":"1","message":"Executing test case Hist¾rico - Rastreamento de Mudanþas de Status","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.489046-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:41.4918888-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Hist¾rico - Rastreamento de Mudanþas de Status # features/saga_orcamento.feature:88
{"timestamp":"2026-02-01T18:40:41.5090584-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel            # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada      # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T18:40:41.6155391-03:00","@version":"1","message":"Salvando orcamento: 835517d5-a3f7-48f6-88f1-a1a81c61b59f","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.6170744-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que um orþamento passou por todo o ciclo         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queUmOrcamentoPassouPorTodoCiclo()
  Quando eu consulto o hist¾rico do orþamento           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.euConsultoOHistoricoDoOrcamento()
  EntÒo deve haver registros de:                        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.deveHaverRegistrosDe(io.cucumber.datatable.DataTable)
    | statusAnterior | statusNovo | motivo               |
    | null           | PENDENTE   | Orþamento criado     |
    | PENDENTE       | PENDENTE   | Diagn¾stico recebido |
    | PENDENTE       | APROVADO   | Cliente aprovou      |
    | APROVADO       | CONFIRMADO | Pagamento processado |
  E cada registro deve ter timestamp                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.cadaRegistroDeveTerTimestamp()
{"timestamp":"2026-02-01T18:40:41.6261987-03:00","@version":"1","message":"Finished test case Hist¾rico - Rastreamento de Mudanþas de Status","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.628214-03:00","@version":"1","message":"Executing test case Saga Completo - Happy Path do Billing","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.6291982-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T18:40:41.6315415-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Completo - Happy Path do Billing               # features/saga_orcamento.feature:99
{"timestamp":"2026-02-01T18:40:41.6466259-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T18:40:41.7573135-03:00","@version":"1","message":"Salvando orcamento: 49ee0ebc-7d50-436d-93b7-86f12384e3ec","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.7573135-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o evento "OS_CRIADA" foi recebido                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queOEventoFoiRecebido(java.lang.String)
{"timestamp":"2026-02-01T18:40:41.761846-03:00","@version":"1","message":"Buscando orcamento por id: 49ee0ebc-7d50-436d-93b7-86f12384e3ec","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.761846-03:00","@version":"1","message":"findOne using query: { \"id\" : \"49ee0ebc-7d50-436d-93b7-86f12384e3ec\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.7638453-03:00","@version":"1","message":"Salvando orcamento: 49ee0ebc-7d50-436d-93b7-86f12384e3ec","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.7648568-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando todos os passos do Saga sÒo executados com sucesso: # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.todosOsPassosDoSagaSaoExecutadosComSucesso(io.cucumber.datatable.DataTable)
    | passo | evento                | status_resultado |
    | 1     | OS_CRIADA             | PENDENTE         |
    | 2     | DIAGNOSTICO_CONCLUIDO | PENDENTE         |
    | 3     | Cliente aprova        | APROVADO         |
    | 4     | EXECUCAO_FINALIZADA   | APROVADO         |
    | 5     | Processar pagamento   | CONFIRMADO       |
  EntÒo o orþamento deve estar com status "CONFIRMADO"       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveEstarComStatus(java.lang.String)
  E todos os eventos devem ter sido publicados               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.todosOsEventosDevemTerSidoPublicados()
  E nenhuma compensaþÒo deve ter sido acionada               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumaCompensacaoDeveTerSidoAcionada()
{"timestamp":"2026-02-01T18:40:41.7737748-03:00","@version":"1","message":"Finished test case Saga Completo - Happy Path do Billing","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.7762923-03:00","@version":"1","message":"Running after all hooks","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.7783962-03:00","@version":"1","message":"Finishing test run","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T18:40:41.7789064-03:00","@version":"1","message":"Sending test run finished event","logger":"io.cucumber.core.runtime.CucumberExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 14.202 s - in br.com.grupo99.billingservice.bdd.CucumberTest
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 40, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] 
[INFO] --- jacoco:0.8.11:report (report) @ billing-service ---
[INFO] Loading execution data file C:\Users\Meu Computador\OneDrive\┴rea de Trabalho\FIAP\projeto\fase_quatro\oficina-billing-service\target\jacoco.exec
[INFO] Analyzed bundle 'billing-service' with 18 classes
[INFO] 
[INFO] --- jar:3.4.2:jar (default-jar) @ billing-service ---
[INFO] Building jar: C:\Users\Meu Computador\OneDrive\┴rea de Trabalho\FIAP\projeto\fase_quatro\oficina-billing-service\target\billing-service-1.0.0-SNAPSHOT.jar
[INFO] 
[INFO] --- spring-boot:3.3.13:repackage (repackage) @ billing-service ---
[INFO] Replacing main artifact C:\Users\Meu Computador\OneDrive\┴rea de Trabalho\FIAP\projeto\fase_quatro\oficina-billing-service\target\billing-service-1.0.0-SNAPSHOT.jar with repackaged archive, adding nested dependencies in BOOT-INF/.
[INFO] The original artifact has been renamed to C:\Users\Meu Computador\OneDrive\┴rea de Trabalho\FIAP\projeto\fase_quatro\oficina-billing-service\target\billing-service-1.0.0-SNAPSHOT.jar.original
[INFO] 
[INFO] --- jacoco:0.8.11:check (jacoco-check) @ billing-service ---
[INFO] Loading execution data file C:\Users\Meu Computador\OneDrive\┴rea de Trabalho\FIAP\projeto\fase_quatro\oficina-billing-service\target\jacoco.exec
[INFO] Analyzed bundle 'billing-service' with 18 classes
[WARNING] Rule violated for bundle billing-service: instructions covered ratio is 0.46, but expected minimum is 0.75
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  01:00 min
[INFO] Finished at: 2026-02-01T18:40:47-03:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.11:check (jacoco-check) on project billing-service: Coverage checks have not been met. See log for details. -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
