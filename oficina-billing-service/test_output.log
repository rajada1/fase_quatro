{"timestamp":"2026-02-01T23:34:24.718425-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest]: OrcamentoRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:25.1592673-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:25.3610171-03:00","@version":"1","message":"Image pull policy will be performed by: DefaultPullPolicy()","logger":"org.testcontainers.images.PullPolicy","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:25.3730985-03:00","@version":"1","message":"Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')","logger":"org.testcontainers.utility.ImageNameSubstitutor","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:26.2232606-03:00","@version":"1","message":"Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first","logger":"org.testcontainers.dockerclient.DockerClientProviderStrategy","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:27.1948113-03:00","@version":"1","message":"Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)","logger":"org.testcontainers.dockerclient.DockerClientProviderStrategy","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:27.1968112-03:00","@version":"1","message":"Docker host IP address is localhost","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:27.2308915-03:00","@version":"1","message":"Connected to docker: \n  Server Version: 28.5.1\n  API Version: 1.51\n  Operating System: Docker Desktop\n  Total Memory: 32084 MB","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:27.2862618-03:00","@version":"1","message":"Creating container for image: testcontainers/ryuk:0.5.1","logger":"tc.testcontainers/ryuk:0.5.1","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:27.5151148-03:00","@version":"1","message":"Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/","logger":"org.testcontainers.utility.RegistryAuthLocator","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:27.7556688-03:00","@version":"1","message":"Container testcontainers/ryuk:0.5.1 is starting: 339c228130caba68646e01c06d27c612a10477719262586596945b374c04dff5","logger":"tc.testcontainers/ryuk:0.5.1","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:28.2666847-03:00","@version":"1","message":"Container testcontainers/ryuk:0.5.1 started in PT0.9804229S","logger":"tc.testcontainers/ryuk:0.5.1","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:28.2770863-03:00","@version":"1","message":"Ryuk started - will monitor and terminate Testcontainers containers on JVM exit","logger":"org.testcontainers.utility.RyukResourceReaper","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:28.2770863-03:00","@version":"1","message":"Checking the system...","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:28.2781746-03:00","@version":"1","message":"?? Docker server version should be at least 1.6.0","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:28.2792686-03:00","@version":"1","message":"Creating container for image: mongo:7.0","logger":"tc.mongo:7.0","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:28.3450491-03:00","@version":"1","message":"Container mongo:7.0 is starting: 06d8ec3926b8738977107028f69a808e8199fffbe0e052ffc8b745866a22d92f","logger":"tc.mongo:7.0","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:29.3066389-03:00","@version":"1","message":"Container mongo:7.0 started in PT1.0273703S","logger":"tc.mongo:7.0","thread":"main","level":"INFO","level_value":20000}

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::               (v3.3.13)

{"timestamp":"2026-02-01T23:34:31.6723853-03:00","@version":"1","message":"Starting OrcamentoRepositoryTest using Java 21.0.9 with PID 26304 (started by Meu Computador in C:\\Users\\Meu Computador\\OneDrive\\┴rea de Trabalho\\FIAP\\projeto\\fase_quatro\\oficina-billing-service)","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:31.6733862-03:00","@version":"1","message":"Running with Spring Boot v3.3.13, Spring v6.1.21","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:31.6733862-03:00","@version":"1","message":"No active profile set, falling back to 1 default profile: \"default\"","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:33.1805108-03:00","@version":"1","message":"Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:33.3527491-03:00","@version":"1","message":"Finished Spring Data repository scanning in 155 ms. Found 2 MongoDB repository interfaces.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:33.9144394-03:00","@version":"1","message":"MongoClient with metadata {\"driver\": {\"name\": \"mongo-java-driver|sync|spring-boot\", \"version\": \"5.0.1\"}, \"os\": {\"type\": \"Windows\", \"name\": \"Windows 11\", \"architecture\": \"amd64\", \"version\": \"10.0\"}, \"platform\": \"Java/Oracle Corporation/21.0.9+7-LTS-338\"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@756695e3, com.mongodb.Jep395RecordCodecProvider@78288298, com.mongodb.KotlinCodecProvider@544364ba]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:65191], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}","logger":"org.mongodb.driver.client","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:33.9465292-03:00","@version":"1","message":"Monitor thread successfully connected to server with description ServerDescription{address=localhost:65191, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=21, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=60445900, setName='docker-rs', canonicalAddress=06d8ec3926b8:27017, hosts=[06d8ec3926b8:27017], passives=[], arbiters=[], primary='06d8ec3926b8:27017', tagSet=TagSet{[]}, electionId=7fffffff0000000000000001, setVersion=1, topologyVersion=TopologyVersion{processId=69800da013890ba0eb1a12a6, counter=6}, lastWriteDate=Sun Feb 01 23:36:17 BRT 2026, lastUpdateTimeNanos=24854660286200}","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='69800d393ac49f732f0a5acf', description='null'}-localhost:65191","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:34.5913249-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$HistoricoStatusEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:34.5923259-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.PagamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:34.6091381-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:34.6127911-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$ItemOrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:34.9156171-03:00","@version":"1","message":"Started OrcamentoRepositoryTest in 4.158 seconds (process running for 15.586)","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"INFO","level_value":20000}
Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
WARNING: A Java agent has been loaded dynamically (C:\Users\Meu Computador\.m2\repository\net\bytebuddy\byte-buddy-agent\1.14.19\byte-buddy-agent-1.14.19.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
{"timestamp":"2026-02-01T23:34:36.5220628-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.6296966-03:00","@version":"1","message":"Salvando orcamento: 9b90c265-a28e-4a1a-a46f-3869baa46302","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.7255857-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.7582313-03:00","@version":"1","message":"Buscando orcamento por osId: baf174e4-1bd8-454f-91ad-ab946625e82c","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.7760904-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"baf174e4-1bd8-454f-91ad-ab946625e82c\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.7968375-03:00","@version":"1","message":"find using query: { \"osId\" : \"baf174e4-1bd8-454f-91ad-ab946625e82c\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.8859118-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.8948909-03:00","@version":"1","message":"Salvando orcamento: 13c3f0c0-2cdd-408c-bfe7-2815a1f7344b","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.8982462-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9065159-03:00","@version":"1","message":"Salvando orcamento: 0b926b70-dee8-4005-af95-1e6ab0d2249b","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9082336-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, dataAprovacao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9152824-03:00","@version":"1","message":"Salvando orcamento: ab388cc6-b282-41a3-b27e-d830332b1866","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9163662-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, dataAprovacao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.923464-03:00","@version":"1","message":"Buscando orcamentos por status: PENDENTE","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9250186-03:00","@version":"1","message":"Created query Query: { \"status\" : \"PENDENTE\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.927556-03:00","@version":"1","message":"find using query: { \"status\" : \"PENDENTE\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9332917-03:00","@version":"1","message":"Buscando orcamentos por status: APROVADO","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9339722-03:00","@version":"1","message":"Created query Query: { \"status\" : \"APROVADO\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9352969-03:00","@version":"1","message":"find using query: { \"status\" : \"APROVADO\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.947095-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9546455-03:00","@version":"1","message":"Salvando orcamento: d49f9da8-de00-4b48-aa84-bad3bc912753","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9638665-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9785641-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9850317-03:00","@version":"1","message":"Salvando orcamento: 03d3522b-0328-40ee-8336-81e97657f2ef","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9861229-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9927495-03:00","@version":"1","message":"Salvando orcamento: 03d3522b-0328-40ee-8336-81e97657f2ef","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:36.9943593-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, dataAprovacao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:37.0065976-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:37.013645-03:00","@version":"1","message":"Salvando orcamento: 94a96521-b0ed-4194-bfff-7eb53973b063","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:37.015458-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:37.021054-03:00","@version":"1","message":"Verificando existÛncia de orcamento para osId: 8f4674e9-03b0-4132-9c29-0c0c27bd40df","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:37.02166-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"8f4674e9-03b0-4132-9c29-0c0c27bd40df\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:37.0239539-03:00","@version":"1","message":"Executing count: { \"osId\" : \"8f4674e9-03b0-4132-9c29-0c0c27bd40df\"} in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:37.0387114-03:00","@version":"1","message":"Verificando existÛncia de orcamento para osId: 83783ffb-64f9-493b-9e70-2265b95d90c6","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:37.0392198-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"83783ffb-64f9-493b-9e70-2265b95d90c6\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:37.0403732-03:00","@version":"1","message":"Executing count: { \"osId\" : \"83783ffb-64f9-493b-9e70-2265b95d90c6\"} in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:37.0932663-03:00","@version":"1","message":"Exception in monitor thread while connecting to server localhost:65191","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='69800d393ac49f732f0a5acf', description='null'}-localhost:65191","level":"INFO","level_value":20000,"stack_trace":"com.mongodb.MongoSocketReadException: Prematurely reached end of stream\r\n\tat com.mongodb.internal.connection.SocketStream.read(SocketStream.java:178)\r\n\tat com.mongodb.internal.connection.SocketStream.read(SocketStream.java:196)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:716)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:580)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:428)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:381)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:221)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:153)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n"}
{"timestamp":"2026-02-01T23:34:38.608754-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:38.6416468-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::               (v3.3.13)

{"timestamp":"2026-02-01T23:34:38.7270162-03:00","@version":"1","message":"Starting SagaOrcamentoSteps using Java 21.0.9 with PID 26304 (started by Meu Computador in C:\\Users\\Meu Computador\\OneDrive\\┴rea de Trabalho\\FIAP\\projeto\\fase_quatro\\oficina-billing-service)","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:38.7270162-03:00","@version":"1","message":"Running with Spring Boot v3.3.13, Spring v6.1.21","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:38.7280172-03:00","@version":"1","message":"The following 1 profile is active: \"test\"","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:40.6892248-03:00","@version":"1","message":"Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:40.7121022-03:00","@version":"1","message":"Finished Spring Data repository scanning in 22 ms. Found 2 MongoDB repository interfaces.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:42.5914356-03:00","@version":"1","message":"MongoClient with metadata {\"driver\": {\"name\": \"mongo-java-driver|sync|spring-boot\", \"version\": \"5.0.1\"}, \"os\": {\"type\": \"Windows\", \"name\": \"Windows 11\", \"architecture\": \"amd64\", \"version\": \"10.0\"}, \"platform\": \"Java/Oracle Corporation/21.0.9+7-LTS-338\"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@eecb80d], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@756695e3, com.mongodb.Jep395RecordCodecProvider@78288298, com.mongodb.KotlinCodecProvider@544364ba]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@462caacf], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}","logger":"org.mongodb.driver.client","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:42.5924445-03:00","@version":"1","message":"Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=27, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=5277700}","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='69800d423ac49f732f0a5ad0', description='null'}-localhost:27017","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:42.7888957-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$HistoricoStatusEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:42.7898961-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:42.8239958-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.PagamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:42.8269945-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$ItemOrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:46.0460912-03:00","@version":"1","message":"Exposing 0 endpoints beneath base path '/actuator'","logger":"org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:46.3074466-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/api/v1/auth/**'], Ant [pattern='/api/v1/auth/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3083335-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/actuator/health/**'], Ant [pattern='/actuator/health/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3083335-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/actuator/health'], Ant [pattern='/actuator/health']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3083335-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-ui.html'], Ant [pattern='/swagger-ui.html']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3093351-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-ui/**'], Ant [pattern='/swagger-ui/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3093351-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/api-docs/**'], Ant [pattern='/api-docs/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3093351-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/v3/api-docs/**'], Ant [pattern='/v3/api-docs/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3093351-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-resources'], Ant [pattern='/swagger-resources']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3093351-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-resources/**'], Ant [pattern='/swagger-resources/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3093351-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/configuration/ui'], Ant [pattern='/configuration/ui']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3103345-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/configuration/security'], Ant [pattern='/configuration/security']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:46.3103345-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/webjars/**'], Ant [pattern='/webjars/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:34:47.1193478-03:00","@version":"1","message":"Exception in monitor thread while connecting to server localhost:65191","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='69800d393ac49f732f0a5acf', description='null'}-localhost:65191","level":"INFO","level_value":20000,"stack_trace":"com.mongodb.MongoSocketOpenException: Exception opening socket\r\n\tat com.mongodb.internal.connection.SocketStream.lambda$open$0(SocketStream.java:86)\r\n\tat java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n\tat com.mongodb.internal.connection.SocketStream.open(SocketStream.java:86)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:201)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:153)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: java.net.ConnectException: Connection refused: getsockopt\r\n\tat java.base/sun.nio.ch.Net.pollConnect(Native Method)\r\n\tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)\r\n\tat java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)\r\n\tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)\r\n\tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n\tat java.base/java.net.Socket.connect(Socket.java:751)\r\n\tat com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:76)\r\n\tat com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:105)\r\n\tat com.mongodb.internal.connection.SocketStream.open(SocketStream.java:80)\r\n\t... 4 common frames omitted\r\n"}
{"timestamp":"2026-02-01T23:34:49.3109809-03:00","@version":"1","message":"Started SagaOrcamentoSteps in 10.654 seconds (process running for 29.981)","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:49.4259572-03:00","@version":"1","message":"Erro ao consumir mensagens do SQS (OS): Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null","logger":"br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener","thread":"scheduling-1","level":"ERROR","level_value":40000,"stack_trace":"java.lang.NullPointerException: Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null\r\n\tat br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener.consumeOSEvents(BillingEventListener.java:68)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:499)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n"}
{"timestamp":"2026-02-01T23:34:49.4406795-03:00","@version":"1","message":"Erro ao consumir mensagens do SQS (Execution): Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null","logger":"br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener","thread":"scheduling-1","level":"ERROR","level_value":40000,"stack_trace":"java.lang.NullPointerException: Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null\r\n\tat br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener.consumeExecutionEvents(BillingEventListener.java:101)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:499)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n"}

Cenßrio: Saga Step 1 - Receber OS Criada e Criar Orþamento                       # features/saga_orcamento.feature:11
{"timestamp":"2026-02-01T23:34:49.6624813-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
  Dado que o evento "OS_CRIADA" foi publicado pelo OS Service                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queOEventoFoiPublicado(java.lang.String)
  E contÚm os dados:                                                             # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.contemOsDados(io.cucumber.datatable.DataTable)
    | osId         | 550e8400-e29b-41d4-a716-446655440000 |
    | clienteNome  | Maria Santos                         |
    | veiculoPlaca | XYZ-5678                             |
{"timestamp":"2026-02-01T23:34:49.8249414-03:00","@version":"1","message":"Salvando orcamento: 47130fbe-a4f5-4294-81ab-a884dd4bc1b2","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:49.8404534-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o Billing Service recebe o evento                                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.billingServiceRecebeEvento()
  EntÒo um orþamento vazio deve ser criado                                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umOrcamentoVazioDeveSerCriado()
  E o status do orþamento deve ser "PENDENTE"                                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDoOrcamentoDeveSer(java.lang.String)
  E o orþamento deve estar associado Ó OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveEstarAssociadoAOS(java.lang.String)
{"timestamp":"2026-02-01T23:34:49.8595642-03:00","@version":"1","message":"Finished test case Saga Step 1 - Receber OS Criada e Criar Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:49.8641905-03:00","@version":"1","message":"Executing test case Saga Step 2 - Receber Diagn¾stico e Calcular Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:49.8672203-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:49.8700963-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Step 2 - Receber Diagn¾stico e Calcular Orþamento                 # features/saga_orcamento.feature:22
{"timestamp":"2026-02-01T23:34:49.8908501-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                              # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.0093767-03:00","@version":"1","message":"Salvando orcamento: 6980feea-9408-46e6-a5d6-1e4e9340d013","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.0103894-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento para a OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoParaOS(java.lang.String)
  E o evento "DIAGNOSTICO_CONCLUIDO" foi publicado                              # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oEventoFoiPublicado(java.lang.String)
  E contÚm:                                                                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.contem(io.cucumber.datatable.DataTable)
    | osId          | 550e8400-e29b-41d4-a716-446655440000 |
    | valorEstimado | 1500.00                              |
    | descricao     | Troca de ¾leo e filtros              |
{"timestamp":"2026-02-01T23:34:50.0158949-03:00","@version":"1","message":"Buscando orcamento por id: 6980feea-9408-46e6-a5d6-1e4e9340d013","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.0188994-03:00","@version":"1","message":"findOne using query: { \"id\" : \"6980feea-9408-46e6-a5d6-1e4e9340d013\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.0358852-03:00","@version":"1","message":"Salvando orcamento: 6980feea-9408-46e6-a5d6-1e4e9340d013","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.0367693-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o Billing Service processa o diagn¾stico                               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.billingServiceProcessaDiagnostico()
  EntÒo o orþamento deve ser atualizado com valor "1500.00"                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveSerAtualizadoComValor(java.lang.String)
  E o status deve mudar para "PENDENTE"                                         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)
  E o evento "ORCAMENTO_PRONTO" deve ser publicado                              # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.0447104-03:00","@version":"1","message":"Finished test case Saga Step 2 - Receber Diagn¾stico e Calcular Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.0472244-03:00","@version":"1","message":"Executing test case Saga Step 3 - Cliente Aprova Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.0492229-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:50.0512233-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Step 3 - Cliente Aprova Orþamento      # features/saga_orcamento.feature:34
{"timestamp":"2026-02-01T23:34:50.0675601-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada   # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.1796454-03:00","@version":"1","message":"Salvando orcamento: e7fe4e6b-22b4-4a55-b88c-fdce46d2c03c","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.1806454-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento com status "PENDENTE" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)
  E o valor total Ú "1500.00"                        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.valorTotalE(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.185162-03:00","@version":"1","message":"Buscando orcamento por id: e7fe4e6b-22b4-4a55-b88c-fdce46d2c03c","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.1861595-03:00","@version":"1","message":"findOne using query: { \"id\" : \"e7fe4e6b-22b4-4a55-b88c-fdce46d2c03c\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.1891653-03:00","@version":"1","message":"Salvando orcamento: e7fe4e6b-22b4-4a55-b88c-fdce46d2c03c","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.1911617-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o cliente aprova o orþamento via API        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.clienteAprovaOrcamentoViaAPI()
  EntÒo o status deve mudar para "APROVADO"          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)
  E o evento "ORCAMENTO_APROVADO" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E o OS Service deve receber o evento               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.osServiceDeveReceberEvento()
  E o Execution Service deve receber o evento        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.executionServiceDeveReceberEvento()
{"timestamp":"2026-02-01T23:34:50.2002814-03:00","@version":"1","message":"Finished test case Saga Step 3 - Cliente Aprova Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.2012813-03:00","@version":"1","message":"Executing test case Saga Step 4 - Processar Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.2038115-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:50.2058081-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Step 4 - Processar Pagamento             # features/saga_orcamento.feature:43
{"timestamp":"2026-02-01T23:34:50.226496-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.3350872-03:00","@version":"1","message":"Salvando orcamento: a7c7c26c-aef0-4035-aa4d-5942f2af828c","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.3361026-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento aprovado                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()
  E a execuþÒo foi concluÝda                           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aExecucaoFoiConcluida()
  Quando o pagamento Ú processado                      # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oPagamentoEProcessado()
  EntÒo o status do pagamento deve ser "CONFIRMADO"    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDoPagamentoDeveSer(java.lang.String)
  E o evento "PAGAMENTO_CONFIRMADO" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E a data de pagamento deve estar registrada          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.dataDePagamentoDeveEstarRegistrada()
{"timestamp":"2026-02-01T23:34:50.3482694-03:00","@version":"1","message":"Finished test case Saga Step 4 - Processar Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.3490331-03:00","@version":"1","message":"Executing test case CompensaþÒo - OS Cancelada","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.3523192-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:50.3544004-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: CompensaþÒo - OS Cancelada                                        # features/saga_orcamento.feature:51
{"timestamp":"2026-02-01T23:34:50.3706407-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.4892998-03:00","@version":"1","message":"Salvando orcamento: 05db9b5e-27a0-4161-a298-4685ae4968f4","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.4923-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento com status "PENDENTE"                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.49781-03:00","@version":"1","message":"Buscando orcamento por id: 05db9b5e-27a0-4161-a298-4685ae4968f4","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.49781-03:00","@version":"1","message":"findOne using query: { \"id\" : \"05db9b5e-27a0-4161-a298-4685ae4968f4\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.500813-03:00","@version":"1","message":"Salvando orcamento: 05db9b5e-27a0-4161-a298-4685ae4968f4","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.5018184-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  E o orþamento estß associado Ó OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoEstaAssociadoAOS(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.5055444-03:00","@version":"1","message":"Buscando orcamento por id: 05db9b5e-27a0-4161-a298-4685ae4968f4","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.5055444-03:00","@version":"1","message":"findOne using query: { \"id\" : \"05db9b5e-27a0-4161-a298-4685ae4968f4\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.5090663-03:00","@version":"1","message":"Salvando orcamento: 05db9b5e-27a0-4161-a298-4685ae4968f4","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.5100607-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o evento "OS_CANCELADA" Ú recebido                                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebido(java.lang.String)
  EntÒo o orþamento deve mudar para status "CANCELADO"                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.o_orþamento_deve_mudar_para_status(java.lang.String)
  E nenhum evento adicional deve ser publicado                             # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumEventoAdicionalDeveSerPublicado()
{"timestamp":"2026-02-01T23:34:50.5185763-03:00","@version":"1","message":"Finished test case CompensaþÒo - OS Cancelada","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.5200388-03:00","@version":"1","message":"Executing test case CompensaþÒo - ExecuþÒo Falhou","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.5220479-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:50.5240474-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: CompensaþÒo - ExecuþÒo Falhou                 # features/saga_orcamento.feature:58
{"timestamp":"2026-02-01T23:34:50.5383517-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.6506874-03:00","@version":"1","message":"Salvando orcamento: 39792da7-79f9-4dc1-b9ab-ede16c0fe1a1","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.6506874-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento aprovado                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()
  E o pagamento ainda nÒo foi processado               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oPagamentoAindaNaoFoiProcessado()
{"timestamp":"2026-02-01T23:34:50.6552054-03:00","@version":"1","message":"Buscando orcamento por id: 39792da7-79f9-4dc1-b9ab-ede16c0fe1a1","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.6562076-03:00","@version":"1","message":"findOne using query: { \"id\" : \"39792da7-79f9-4dc1-b9ab-ede16c0fe1a1\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.6599267-03:00","@version":"1","message":"Salvando orcamento: 39792da7-79f9-4dc1-b9ab-ede16c0fe1a1","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.6609317-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o evento "EXECUCAO_FALHOU" Ú recebido         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebido(java.lang.String)
  EntÒo o orþamento deve mudar para status "CANCELADO" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.o_orþamento_deve_mudar_para_status(java.lang.String)
  E nenhuma cobranþa deve ser feita                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumaCobrancaDeveSerFeita()
{"timestamp":"2026-02-01T23:34:50.6704648-03:00","@version":"1","message":"Finished test case CompensaþÒo - ExecuþÒo Falhou","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.6714455-03:00","@version":"1","message":"Executing test case IdempotÛncia - Evento Duplicado de OS_CRIADA","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.6739935-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:50.6760039-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: IdempotÛncia - Evento Duplicado de OS_CRIADA                              # features/saga_orcamento.feature:65
{"timestamp":"2026-02-01T23:34:50.6919905-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.8011327-03:00","@version":"1","message":"Salvando orcamento: 8a2431b7-9bba-4129-9335-4fa589054a6d","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.8021318-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que jß existe um orþamento para a OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queJaExisteUmOrcamentoParaOS(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.8051331-03:00","@version":"1","message":"Buscando orcamento por osId: 550e8400-e29b-41d4-a716-446655440000","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.8061332-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.8071293-03:00","@version":"1","message":"find using query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o evento "OS_CRIADA" Ú recebido novamente para a mesma OS                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebidoNovamenteParaMesmaOS(java.lang.String)
  EntÒo o evento deve ser ignorado                                                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerIgnorado()
{"timestamp":"2026-02-01T23:34:50.8116528-03:00","@version":"1","message":"Buscando orcamento por osId: 550e8400-e29b-41d4-a716-446655440000","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.8126496-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.8126496-03:00","@version":"1","message":"find using query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  E nenhum novo orþamento deve ser criado                                          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumNovoOrcamentoDeveSerCriado()
  E um log de duplicata deve ser registrado                                        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umLogDeDuplicataDeveSerRegistrado()
{"timestamp":"2026-02-01T23:34:50.8210461-03:00","@version":"1","message":"Finished test case IdempotÛncia - Evento Duplicado de OS_CRIADA","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.822035-03:00","@version":"1","message":"Executing test case ValidaþÒo - Orþamento Rejeitado pelo Cliente","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.824029-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:50.826029-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: ValidaþÒo - Orþamento Rejeitado pelo Cliente # features/saga_orcamento.feature:72
{"timestamp":"2026-02-01T23:34:50.8420651-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.9534115-03:00","@version":"1","message":"Salvando orcamento: 28abb0e1-77d7-46e6-8f18-864a08c626d2","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.9544121-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento com status "PENDENTE"  # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)
{"timestamp":"2026-02-01T23:34:50.9579344-03:00","@version":"1","message":"Buscando orcamento por id: 28abb0e1-77d7-46e6-8f18-864a08c626d2","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.9589338-03:00","@version":"1","message":"findOne using query: { \"id\" : \"28abb0e1-77d7-46e6-8f18-864a08c626d2\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.9619302-03:00","@version":"1","message":"Salvando orcamento: 28abb0e1-77d7-46e6-8f18-864a08c626d2","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.9629302-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o cliente rejeita o orþamento                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.clienteRejeitaOrcamento()
  EntÒo o status deve mudar para "REJEITADO"          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)
  E o evento "ORCAMENTO_REJEITADO" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E o motivo da rejeiþÒo deve estar registrado        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.motivoDaRejeicaoDeveEstarRegistrado()
{"timestamp":"2026-02-01T23:34:50.9714554-03:00","@version":"1","message":"Finished test case ValidaþÒo - Orþamento Rejeitado pelo Cliente","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.9724491-03:00","@version":"1","message":"Executing test case ValidaþÒo - Falha no Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:50.9744524-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:50.9765081-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: ValidaþÒo - Falha no Pagamento                # features/saga_orcamento.feature:79
{"timestamp":"2026-02-01T23:34:50.9897792-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:34:51.1055985-03:00","@version":"1","message":"Salvando orcamento: 656ecb64-30bd-46a9-a617-4dab084dae24","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.1065969-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento aprovado                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()
  E a execuþÒo foi concluÝda                           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aExecucaoFoiConcluida()
  Quando o processamento de pagamento falha            # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oProcessamentoDePagamentoFalha()
  EntÒo o evento "PAGAMENTO_FALHOU" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E o orþamento deve manter o status "APROVADO"        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveManterOStatus(java.lang.String)
  E o motivo da falha deve estar registrado            # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.motivoDaFalhaDeveEstarRegistrado()
  E um alerta deve ser enviado para o gerente          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umAlertaDeveSerEnviadoParaOGerente()
{"timestamp":"2026-02-01T23:34:51.1161162-03:00","@version":"1","message":"Finished test case ValidaþÒo - Falha no Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.1171183-03:00","@version":"1","message":"Executing test case Hist¾rico - Rastreamento de Mudanþas de Status","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.1191144-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:51.1212691-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Hist¾rico - Rastreamento de Mudanþas de Status # features/saga_orcamento.feature:88
{"timestamp":"2026-02-01T23:34:51.1343769-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel            # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada      # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:34:51.2442407-03:00","@version":"1","message":"Salvando orcamento: 9c61209c-8521-402d-a459-7f7692bd9b57","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.2458641-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que um orþamento passou por todo o ciclo         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queUmOrcamentoPassouPorTodoCiclo()
  Quando eu consulto o hist¾rico do orþamento           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.euConsultoOHistoricoDoOrcamento()
  EntÒo deve haver registros de:                        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.deveHaverRegistrosDe(io.cucumber.datatable.DataTable)
    | statusAnterior | statusNovo | motivo               |
    | null           | PENDENTE   | Orþamento criado     |
    | PENDENTE       | PENDENTE   | Diagn¾stico recebido |
    | PENDENTE       | APROVADO   | Cliente aprovou      |
    | APROVADO       | CONFIRMADO | Pagamento processado |
  E cada registro deve ter timestamp                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.cadaRegistroDeveTerTimestamp()
{"timestamp":"2026-02-01T23:34:51.2537822-03:00","@version":"1","message":"Finished test case Hist¾rico - Rastreamento de Mudanþas de Status","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.2547678-03:00","@version":"1","message":"Executing test case Saga Completo - Happy Path do Billing","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.2563978-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:34:51.2572824-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Completo - Happy Path do Billing               # features/saga_orcamento.feature:99
{"timestamp":"2026-02-01T23:34:51.2726721-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:34:51.3834373-03:00","@version":"1","message":"Salvando orcamento: 415161b6-da74-49f2-ae94-712c5a30566b","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.3844379-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o evento "OS_CRIADA" foi recebido                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queOEventoFoiRecebido(java.lang.String)
{"timestamp":"2026-02-01T23:34:51.3884356-03:00","@version":"1","message":"Buscando orcamento por id: 415161b6-da74-49f2-ae94-712c5a30566b","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.3884356-03:00","@version":"1","message":"findOne using query: { \"id\" : \"415161b6-da74-49f2-ae94-712c5a30566b\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.3910993-03:00","@version":"1","message":"Salvando orcamento: 415161b6-da74-49f2-ae94-712c5a30566b","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.3919613-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando todos os passos do Saga sÒo executados com sucesso: # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.todosOsPassosDoSagaSaoExecutadosComSucesso(io.cucumber.datatable.DataTable)
    | passo | evento                | status_resultado |
    | 1     | OS_CRIADA             | PENDENTE         |
    | 2     | DIAGNOSTICO_CONCLUIDO | PENDENTE         |
    | 3     | Cliente aprova        | APROVADO         |
    | 4     | EXECUCAO_FINALIZADA   | APROVADO         |
    | 5     | Processar pagamento   | CONFIRMADO       |
  EntÒo o orþamento deve estar com status "CONFIRMADO"       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveEstarComStatus(java.lang.String)
  E todos os eventos devem ter sido publicados               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.todosOsEventosDevemTerSidoPublicados()
  E nenhuma compensaþÒo deve ter sido acionada               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumaCompensacaoDeveTerSidoAcionada()
{"timestamp":"2026-02-01T23:34:51.3998579-03:00","@version":"1","message":"Finished test case Saga Completo - Happy Path do Billing","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.4016331-03:00","@version":"1","message":"Running after all hooks","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.4033767-03:00","@version":"1","message":"Finishing test run","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:34:51.4043928-03:00","@version":"1","message":"Sending test run finished event","logger":"io.cucumber.core.runtime.CucumberExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
