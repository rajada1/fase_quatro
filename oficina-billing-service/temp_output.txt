{"timestamp":"2026-02-01T23:28:14.1668473-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest]: OrcamentoRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:14.5349871-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:14.7045852-03:00","@version":"1","message":"Image pull policy will be performed by: DefaultPullPolicy()","logger":"org.testcontainers.images.PullPolicy","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:14.7152779-03:00","@version":"1","message":"Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')","logger":"org.testcontainers.utility.ImageNameSubstitutor","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:15.5879568-03:00","@version":"1","message":"Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first","logger":"org.testcontainers.dockerclient.DockerClientProviderStrategy","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:16.578525-03:00","@version":"1","message":"Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)","logger":"org.testcontainers.dockerclient.DockerClientProviderStrategy","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:16.58204-03:00","@version":"1","message":"Docker host IP address is localhost","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:16.617607-03:00","@version":"1","message":"Connected to docker: \n  Server Version: 28.5.1\n  API Version: 1.51\n  Operating System: Docker Desktop\n  Total Memory: 32084 MB","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:16.6800226-03:00","@version":"1","message":"Creating container for image: testcontainers/ryuk:0.5.1","logger":"tc.testcontainers/ryuk:0.5.1","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:16.920858-03:00","@version":"1","message":"Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/","logger":"org.testcontainers.utility.RegistryAuthLocator","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:17.1929335-03:00","@version":"1","message":"Container testcontainers/ryuk:0.5.1 is starting: 97a28d27378eda84ca06e306594f8e4b01ad48226998dda5c623bfd5f301c583","logger":"tc.testcontainers/ryuk:0.5.1","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:17.9401136-03:00","@version":"1","message":"Container testcontainers/ryuk:0.5.1 started in PT1.260091S","logger":"tc.testcontainers/ryuk:0.5.1","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:17.9543961-03:00","@version":"1","message":"Ryuk started - will monitor and terminate Testcontainers containers on JVM exit","logger":"org.testcontainers.utility.RyukResourceReaper","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:17.9549063-03:00","@version":"1","message":"Checking the system...","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:17.9572116-03:00","@version":"1","message":"?? Docker server version should be at least 1.6.0","logger":"org.testcontainers.DockerClientFactory","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:17.9585399-03:00","@version":"1","message":"Creating container for image: mongo:7.0","logger":"tc.mongo:7.0","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:18.0397801-03:00","@version":"1","message":"Container mongo:7.0 is starting: 0f4255e582174fd81922bb8312500601eb14710f7362bb0cf2647873c1398231","logger":"tc.mongo:7.0","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:19.6820849-03:00","@version":"1","message":"Container mongo:7.0 started in PT1.723545S","logger":"tc.mongo:7.0","thread":"main","level":"INFO","level_value":20000}

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::               (v3.3.13)

{"timestamp":"2026-02-01T23:28:22.6962606-03:00","@version":"1","message":"Starting OrcamentoRepositoryTest using Java 21.0.9 with PID 13440 (started by Meu Computador in C:\\Users\\Meu Computador\\OneDrive\\┴rea de Trabalho\\FIAP\\projeto\\fase_quatro\\oficina-billing-service)","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:22.697261-03:00","@version":"1","message":"Running with Spring Boot v3.3.13, Spring v6.1.21","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:22.6985611-03:00","@version":"1","message":"No active profile set, falling back to 1 default profile: \"default\"","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:24.251229-03:00","@version":"1","message":"Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:24.3982026-03:00","@version":"1","message":"Finished Spring Data repository scanning in 135 ms. Found 2 MongoDB repository interfaces.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:24.9908568-03:00","@version":"1","message":"MongoClient with metadata {\"driver\": {\"name\": \"mongo-java-driver|sync|spring-boot\", \"version\": \"5.0.1\"}, \"os\": {\"type\": \"Windows\", \"name\": \"Windows 11\", \"architecture\": \"amd64\", \"version\": \"10.0\"}, \"platform\": \"Java/Oracle Corporation/21.0.9+7-LTS-338\"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@756695e3, com.mongodb.Jep395RecordCodecProvider@78288298, com.mongodb.KotlinCodecProvider@544364ba]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:61647], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}","logger":"org.mongodb.driver.client","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:25.0229958-03:00","@version":"1","message":"Monitor thread successfully connected to server with description ServerDescription{address=localhost:61647, type=REPLICA_SET_PRIMARY, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=21, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=56860200, setName='docker-rs', canonicalAddress=0f4255e58217:27017, hosts=[0f4255e58217:27017], passives=[], arbiters=[], primary='0f4255e58217:27017', tagSet=TagSet{[]}, electionId=7fffffff0000000000000001, setVersion=1, topologyVersion=TopologyVersion{processId=69800c2dd45a36674b503b8d, counter=6}, lastWriteDate=Sun Feb 01 23:30:07 BRT 2026, lastUpdateTimeNanos=24485736975200}","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='69800bc88d07a877c08fed0a', description='null'}-localhost:61647","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:25.61101-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$HistoricoStatusEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:25.6120092-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.PagamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:25.6320725-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:25.6373513-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$ItemOrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:26.0286766-03:00","@version":"1","message":"Started OrcamentoRepositoryTest in 4.359 seconds (process running for 17.789)","logger":"br.com.grupo99.billingservice.infrastructure.repository.OrcamentoRepositoryTest","thread":"main","level":"INFO","level_value":20000}
Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
WARNING: A Java agent has been loaded dynamically (C:\Users\Meu Computador\.m2\repository\net\bytebuddy\byte-buddy-agent\1.14.19\byte-buddy-agent-1.14.19.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
{"timestamp":"2026-02-01T23:28:28.2264949-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.4380144-03:00","@version":"1","message":"Salvando orcamento: a76f4357-a5af-4d51-9206-5559de3845c7","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.6176879-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.659884-03:00","@version":"1","message":"Buscando orcamento por osId: 16bd57c4-855f-4772-a395-e122394ba09e","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.6787189-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"16bd57c4-855f-4772-a395-e122394ba09e\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.6952111-03:00","@version":"1","message":"find using query: { \"osId\" : \"16bd57c4-855f-4772-a395-e122394ba09e\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.7984889-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8051465-03:00","@version":"1","message":"Salvando orcamento: db9ab2a6-03a3-430e-873e-b7523c1cd2c9","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.806876-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8150917-03:00","@version":"1","message":"Salvando orcamento: 67f1deb2-5d87-42f2-86c9-1b1e67a14022","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8170996-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, dataAprovacao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8233566-03:00","@version":"1","message":"Salvando orcamento: 0aeed477-971c-4f83-b839-3475ce86dc30","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8253141-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, dataAprovacao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8309841-03:00","@version":"1","message":"Buscando orcamentos por status: PENDENTE","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.832049-03:00","@version":"1","message":"Created query Query: { \"status\" : \"PENDENTE\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8348064-03:00","@version":"1","message":"find using query: { \"status\" : \"PENDENTE\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8396016-03:00","@version":"1","message":"Buscando orcamentos por status: APROVADO","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8407174-03:00","@version":"1","message":"Created query Query: { \"status\" : \"APROVADO\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8421947-03:00","@version":"1","message":"find using query: { \"status\" : \"APROVADO\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8546719-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8623977-03:00","@version":"1","message":"Salvando orcamento: 6cf40c2d-918b-497b-9abe-4ab5a62753b7","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8675653-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8853363-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8944477-03:00","@version":"1","message":"Salvando orcamento: 193df06b-5082-4703-97cd-32c0fa7fc8b3","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.8956825-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.9023662-03:00","@version":"1","message":"Salvando orcamento: 193df06b-5082-4703-97cd-32c0fa7fc8b3","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.9043591-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, dataAprovacao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.9171614-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.9252875-03:00","@version":"1","message":"Salvando orcamento: b0592c66-2bd0-49f7-a8f3-213e98ab5b8c","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.9282963-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, dataGeracao, observacao, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.934762-03:00","@version":"1","message":"Verificando existÛncia de orcamento para osId: 177d28ce-0264-4e4d-9790-b0abf30569a8","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.9357732-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"177d28ce-0264-4e4d-9790-b0abf30569a8\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.9382919-03:00","@version":"1","message":"Executing count: { \"osId\" : \"177d28ce-0264-4e4d-9790-b0abf30569a8\"} in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.9600391-03:00","@version":"1","message":"Verificando existÛncia de orcamento para osId: 01e1ae4a-c426-41d6-a1bf-52773c7e2f5d","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.9618306-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"01e1ae4a-c426-41d6-a1bf-52773c7e2f5d\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:28.9636416-03:00","@version":"1","message":"Executing count: { \"osId\" : \"01e1ae4a-c426-41d6-a1bf-52773c7e2f5d\"} in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:29.0285812-03:00","@version":"1","message":"Exception in monitor thread while connecting to server localhost:61647","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='69800bc88d07a877c08fed0a', description='null'}-localhost:61647","level":"INFO","level_value":20000,"stack_trace":"com.mongodb.MongoSocketReadException: Prematurely reached end of stream\r\n\tat com.mongodb.internal.connection.SocketStream.read(SocketStream.java:178)\r\n\tat com.mongodb.internal.connection.SocketStream.read(SocketStream.java:196)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveResponseBuffers(InternalStreamConnection.java:716)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveMessageWithAdditionalTimeout(InternalStreamConnection.java:580)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:428)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receive(InternalStreamConnection.java:381)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:221)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:153)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n"}
{"timestamp":"2026-02-01T23:28:30.787814-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:30.8156623-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::               (v3.3.13)

{"timestamp":"2026-02-01T23:28:30.9144433-03:00","@version":"1","message":"Starting SagaOrcamentoSteps using Java 21.0.9 with PID 13440 (started by Meu Computador in C:\\Users\\Meu Computador\\OneDrive\\┴rea de Trabalho\\FIAP\\projeto\\fase_quatro\\oficina-billing-service)","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:30.9144433-03:00","@version":"1","message":"Running with Spring Boot v3.3.13, Spring v6.1.21","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:30.9144433-03:00","@version":"1","message":"The following 1 profile is active: \"test\"","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:32.5714793-03:00","@version":"1","message":"Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:32.6071423-03:00","@version":"1","message":"Finished Spring Data repository scanning in 35 ms. Found 2 MongoDB repository interfaces.","logger":"org.springframework.data.repository.config.RepositoryConfigurationDelegate","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:35.2194179-03:00","@version":"1","message":"MongoClient with metadata {\"driver\": {\"name\": \"mongo-java-driver|sync|spring-boot\", \"version\": \"5.0.1\"}, \"os\": {\"type\": \"Windows\", \"name\": \"Windows 11\", \"architecture\": \"amd64\", \"version\": \"10.0\"}, \"platform\": \"Java/Oracle Corporation/21.0.9+7-LTS-338\"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@54251e22], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@756695e3, com.mongodb.Jep395RecordCodecProvider@78288298, com.mongodb.KotlinCodecProvider@544364ba]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@4d867d58], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}","logger":"org.mongodb.driver.client","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:35.2258807-03:00","@version":"1","message":"Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=27, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=8739900}","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='69800bd38d07a877c08fed0b', description='null'}-localhost:27017","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:35.4272926-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$ItemOrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:35.4272926-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:35.4323048-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity$HistoricoStatusEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:35.4323048-03:00","@version":"1","message":"Analyzing class class br.com.grupo99.billingservice.infrastructure.persistence.entity.PagamentoEntity for index information","logger":"org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:39.0671942-03:00","@version":"1","message":"Exception in monitor thread while connecting to server localhost:61647","logger":"org.mongodb.driver.cluster","thread":"cluster-ClusterId{value='69800bc88d07a877c08fed0a', description='null'}-localhost:61647","level":"INFO","level_value":20000,"stack_trace":"com.mongodb.MongoSocketOpenException: Exception opening socket\r\n\tat com.mongodb.internal.connection.SocketStream.lambda$open$0(SocketStream.java:86)\r\n\tat java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n\tat com.mongodb.internal.connection.SocketStream.open(SocketStream.java:86)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:201)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193)\r\n\tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:153)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: java.net.ConnectException: Connection refused: getsockopt\r\n\tat java.base/sun.nio.ch.Net.pollConnect(Native Method)\r\n\tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)\r\n\tat java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542)\r\n\tat java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:592)\r\n\tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n\tat java.base/java.net.Socket.connect(Socket.java:751)\r\n\tat com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:76)\r\n\tat com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:105)\r\n\tat com.mongodb.internal.connection.SocketStream.open(SocketStream.java:80)\r\n\t... 4 common frames omitted\r\n"}
{"timestamp":"2026-02-01T23:28:40.4332253-03:00","@version":"1","message":"Exposing 0 endpoints beneath base path '/actuator'","logger":"org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:40.7820902-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/api/v1/auth/**'], Ant [pattern='/api/v1/auth/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.7846228-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/actuator/health/**'], Ant [pattern='/actuator/health/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.7870105-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/actuator/health'], Ant [pattern='/actuator/health']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.787314-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-ui.html'], Ant [pattern='/swagger-ui.html']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.7878199-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-ui/**'], Ant [pattern='/swagger-ui/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.7897082-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/api-docs/**'], Ant [pattern='/api-docs/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.7903372-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/v3/api-docs/**'], Ant [pattern='/v3/api-docs/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.7917258-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-resources'], Ant [pattern='/swagger-resources']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.7917258-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/swagger-resources/**'], Ant [pattern='/swagger-resources/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.7922336-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/configuration/ui'], Ant [pattern='/configuration/ui']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.7922336-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/configuration/security'], Ant [pattern='/configuration/security']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:40.7922336-03:00","@version":"1","message":"You are asking Spring Security to ignore Deferred [Mvc [pattern='/webjars/**'], Ant [pattern='/webjars/**']]. This is not recommended -- please use permitAll via HttpSecurity#authorizeHttpRequests instead.","logger":"org.springframework.security.config.annotation.web.builders.WebSecurity","thread":"main","level":"WARN","level_value":30000}
{"timestamp":"2026-02-01T23:28:46.3257953-03:00","@version":"1","message":"Started SagaOrcamentoSteps in 15.487 seconds (process running for 38.084)","logger":"br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:46.484447-03:00","@version":"1","message":"Erro ao consumir mensagens do SQS (OS): Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null","logger":"br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener","thread":"scheduling-1","level":"ERROR","level_value":40000,"stack_trace":"java.lang.NullPointerException: Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null\r\n\tat br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener.consumeOSEvents(BillingEventListener.java:68)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:499)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n"}
{"timestamp":"2026-02-01T23:28:46.5045686-03:00","@version":"1","message":"Erro ao consumir mensagens do SQS (Execution): Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null","logger":"br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener","thread":"scheduling-1","level":"ERROR","level_value":40000,"stack_trace":"java.lang.NullPointerException: Cannot invoke \"software.amazon.awssdk.services.sqs.model.ReceiveMessageResponse.messages()\" because the return value of \"software.amazon.awssdk.services.sqs.SqsClient.receiveMessage(software.amazon.awssdk.services.sqs.model.ReceiveMessageRequest)\" is null\r\n\tat br.com.grupo99.billingservice.infrastructure.messaging.BillingEventListener.consumeExecutionEvents(BillingEventListener.java:101)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)\r\n\tat io.micrometer.observation.Observation.observe(Observation.java:499)\r\n\tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)\r\n\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n"}

Cenßrio: Saga Step 1 - Receber OS Criada e Criar Orþamento                       # features/saga_orcamento.feature:11
{"timestamp":"2026-02-01T23:28:46.7369992-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
  Dado que o evento "OS_CRIADA" foi publicado pelo OS Service                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queOEventoFoiPublicado(java.lang.String)
  E contÚm os dados:                                                             # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.contemOsDados(io.cucumber.datatable.DataTable)
    | osId         | 550e8400-e29b-41d4-a716-446655440000 |
    | clienteNome  | Maria Santos                         |
    | veiculoPlaca | XYZ-5678                             |
{"timestamp":"2026-02-01T23:28:46.8836604-03:00","@version":"1","message":"Salvando orcamento: f6b9aa6e-ae16-4bd3-a38b-5366d5a11829","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:46.9005401-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o Billing Service recebe o evento                                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.billingServiceRecebeEvento()
  EntÒo um orþamento vazio deve ser criado                                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umOrcamentoVazioDeveSerCriado()
  E o status do orþamento deve ser "PENDENTE"                                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDoOrcamentoDeveSer(java.lang.String)
  E o orþamento deve estar associado Ó OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveEstarAssociadoAOS(java.lang.String)
{"timestamp":"2026-02-01T23:28:46.9165417-03:00","@version":"1","message":"Finished test case Saga Step 1 - Receber OS Criada e Criar Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:46.921489-03:00","@version":"1","message":"Executing test case Saga Step 2 - Receber Diagn¾stico e Calcular Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:46.9250011-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:46.9277903-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Step 2 - Receber Diagn¾stico e Calcular Orþamento                 # features/saga_orcamento.feature:22
{"timestamp":"2026-02-01T23:28:46.9511226-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                              # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.0573157-03:00","@version":"1","message":"Salvando orcamento: da8ab3e8-9e6b-4f16-9571-96ffae8190bc","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.0593134-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento para a OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoParaOS(java.lang.String)
  E o evento "DIAGNOSTICO_CONCLUIDO" foi publicado                              # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oEventoFoiPublicado(java.lang.String)
  E contÚm:                                                                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.contem(io.cucumber.datatable.DataTable)
    | osId          | 550e8400-e29b-41d4-a716-446655440000 |
    | valorEstimado | 1500.00                              |
    | descricao     | Troca de ¾leo e filtros              |
{"timestamp":"2026-02-01T23:28:47.0658375-03:00","@version":"1","message":"Buscando orcamento por id: da8ab3e8-9e6b-4f16-9571-96ffae8190bc","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.067838-03:00","@version":"1","message":"findOne using query: { \"id\" : \"da8ab3e8-9e6b-4f16-9571-96ffae8190bc\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.0822151-03:00","@version":"1","message":"Salvando orcamento: da8ab3e8-9e6b-4f16-9571-96ffae8190bc","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.0842136-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o Billing Service processa o diagn¾stico                               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.billingServiceProcessaDiagnostico()
  EntÒo o orþamento deve ser atualizado com valor "1500.00"                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveSerAtualizadoComValor(java.lang.String)
  E o status deve mudar para "PENDENTE"                                         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)
  E o evento "ORCAMENTO_PRONTO" deve ser publicado                              # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.0938034-03:00","@version":"1","message":"Finished test case Saga Step 2 - Receber Diagn¾stico e Calcular Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.0948152-03:00","@version":"1","message":"Executing test case Saga Step 3 - Cliente Aprova Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.0968152-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:47.0988156-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Step 3 - Cliente Aprova Orþamento      # features/saga_orcamento.feature:34
{"timestamp":"2026-02-01T23:28:47.1190513-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada   # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.2279651-03:00","@version":"1","message":"Salvando orcamento: 15868db8-3fef-4dfc-b4c1-82ee7f4af049","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.2300115-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento com status "PENDENTE" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)
  E o valor total Ú "1500.00"                        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.valorTotalE(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.2350217-03:00","@version":"1","message":"Buscando orcamento por id: 15868db8-3fef-4dfc-b4c1-82ee7f4af049","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.2360238-03:00","@version":"1","message":"findOne using query: { \"id\" : \"15868db8-3fef-4dfc-b4c1-82ee7f4af049\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.2400231-03:00","@version":"1","message":"Salvando orcamento: 15868db8-3fef-4dfc-b4c1-82ee7f4af049","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.2416285-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o cliente aprova o orþamento via API        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.clienteAprovaOrcamentoViaAPI()
  EntÒo o status deve mudar para "APROVADO"          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)
  E o evento "ORCAMENTO_APROVADO" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E o OS Service deve receber o evento               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.osServiceDeveReceberEvento()
  E o Execution Service deve receber o evento        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.executionServiceDeveReceberEvento()
{"timestamp":"2026-02-01T23:28:47.251518-03:00","@version":"1","message":"Finished test case Saga Step 3 - Cliente Aprova Orþamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.254039-03:00","@version":"1","message":"Executing test case Saga Step 4 - Processar Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.255702-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:47.258701-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Step 4 - Processar Pagamento             # features/saga_orcamento.feature:43
{"timestamp":"2026-02-01T23:28:47.277886-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.3842082-03:00","@version":"1","message":"Salvando orcamento: c8d80f98-67df-4540-a100-ef2cb125bfa5","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.3862067-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento aprovado                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()
  E a execuþÒo foi concluÝda                           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aExecucaoFoiConcluida()
  Quando o pagamento Ú processado                      # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oPagamentoEProcessado()
  EntÒo o status do pagamento deve ser "CONFIRMADO"    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDoPagamentoDeveSer(java.lang.String)
  E o evento "PAGAMENTO_CONFIRMADO" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E a data de pagamento deve estar registrada          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.dataDePagamentoDeveEstarRegistrada()
{"timestamp":"2026-02-01T23:28:47.3977253-03:00","@version":"1","message":"Finished test case Saga Step 4 - Processar Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.3987257-03:00","@version":"1","message":"Executing test case CompensaþÒo - OS Cancelada","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.4007252-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:47.4027265-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: CompensaþÒo - OS Cancelada                                        # features/saga_orcamento.feature:51
{"timestamp":"2026-02-01T23:28:47.4183007-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.5277548-03:00","@version":"1","message":"Salvando orcamento: e54db455-2939-44a6-812a-a4bdf6a9c555","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.5297572-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento com status "PENDENTE"                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.5347543-03:00","@version":"1","message":"Buscando orcamento por id: e54db455-2939-44a6-812a-a4bdf6a9c555","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.5352633-03:00","@version":"1","message":"findOne using query: { \"id\" : \"e54db455-2939-44a6-812a-a4bdf6a9c555\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.5382729-03:00","@version":"1","message":"Salvando orcamento: e54db455-2939-44a6-812a-a4bdf6a9c555","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.5402748-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  E o orþamento estß associado Ó OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoEstaAssociadoAOS(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.5442725-03:00","@version":"1","message":"Buscando orcamento por id: e54db455-2939-44a6-812a-a4bdf6a9c555","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.5452732-03:00","@version":"1","message":"findOne using query: { \"id\" : \"e54db455-2939-44a6-812a-a4bdf6a9c555\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.5481754-03:00","@version":"1","message":"Salvando orcamento: e54db455-2939-44a6-812a-a4bdf6a9c555","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.550177-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o evento "OS_CANCELADA" Ú recebido                                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebido(java.lang.String)
  EntÒo o orþamento deve mudar para status "CANCELADO"                     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.o_orþamento_deve_mudar_para_status(java.lang.String)
  E nenhum evento adicional deve ser publicado                             # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumEventoAdicionalDeveSerPublicado()
{"timestamp":"2026-02-01T23:28:47.560223-03:00","@version":"1","message":"Finished test case CompensaþÒo - OS Cancelada","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.5632247-03:00","@version":"1","message":"Executing test case CompensaþÒo - ExecuþÒo Falhou","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.5662231-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:47.5687433-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: CompensaþÒo - ExecuþÒo Falhou                 # features/saga_orcamento.feature:58
{"timestamp":"2026-02-01T23:28:47.5868141-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.7046225-03:00","@version":"1","message":"Salvando orcamento: 83bffba5-48e3-4607-95ce-a408984e778a","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.7066213-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento aprovado                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()
  E o pagamento ainda nÒo foi processado               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oPagamentoAindaNaoFoiProcessado()
{"timestamp":"2026-02-01T23:28:47.7146489-03:00","@version":"1","message":"Buscando orcamento por id: 83bffba5-48e3-4607-95ce-a408984e778a","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.7156494-03:00","@version":"1","message":"findOne using query: { \"id\" : \"83bffba5-48e3-4607-95ce-a408984e778a\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.7191831-03:00","@version":"1","message":"Salvando orcamento: 83bffba5-48e3-4607-95ce-a408984e778a","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.7211884-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o evento "EXECUCAO_FALHOU" Ú recebido         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebido(java.lang.String)
  EntÒo o orþamento deve mudar para status "CANCELADO" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.o_orþamento_deve_mudar_para_status(java.lang.String)
  E nenhuma cobranþa deve ser feita                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumaCobrancaDeveSerFeita()
{"timestamp":"2026-02-01T23:28:47.7310224-03:00","@version":"1","message":"Finished test case CompensaþÒo - ExecuþÒo Falhou","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.7320222-03:00","@version":"1","message":"Executing test case IdempotÛncia - Evento Duplicado de OS_CRIADA","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.7335349-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:47.7355456-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: IdempotÛncia - Evento Duplicado de OS_CRIADA                              # features/saga_orcamento.feature:65
{"timestamp":"2026-02-01T23:28:47.7559296-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                                       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada                                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.8695382-03:00","@version":"1","message":"Salvando orcamento: 0e887f70-528a-4192-b0f3-a65f9ab82e0e","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.8705371-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que jß existe um orþamento para a OS "550e8400-e29b-41d4-a716-446655440000" # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queJaExisteUmOrcamentoParaOS(java.lang.String)
{"timestamp":"2026-02-01T23:28:47.8755406-03:00","@version":"1","message":"Buscando orcamento por osId: 550e8400-e29b-41d4-a716-446655440000","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.8755406-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.8775377-03:00","@version":"1","message":"find using query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o evento "OS_CRIADA" Ú recebido novamente para a mesma OS                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoERecebidoNovamenteParaMesmaOS(java.lang.String)
  EntÒo o evento deve ser ignorado                                                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerIgnorado()
{"timestamp":"2026-02-01T23:28:47.8835789-03:00","@version":"1","message":"Buscando orcamento por osId: 550e8400-e29b-41d4-a716-446655440000","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.8846755-03:00","@version":"1","message":"Created query Query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"}, Fields: {}, Sort: {}","logger":"org.springframework.data.mongodb.repository.query.MongoQueryCreator","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.8846755-03:00","@version":"1","message":"find using query: { \"osId\" : \"550e8400-e29b-41d4-a716-446655440000\"} fields: Document{{}} sort: null for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  E nenhum novo orþamento deve ser criado                                          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumNovoOrcamentoDeveSerCriado()
  E um log de duplicata deve ser registrado                                        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umLogDeDuplicataDeveSerRegistrado()
{"timestamp":"2026-02-01T23:28:47.8932009-03:00","@version":"1","message":"Finished test case IdempotÛncia - Evento Duplicado de OS_CRIADA","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.895202-03:00","@version":"1","message":"Executing test case ValidaþÒo - Orþamento Rejeitado pelo Cliente","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:47.8972049-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:47.898206-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: ValidaþÒo - Orþamento Rejeitado pelo Cliente # features/saga_orcamento.feature:72
{"timestamp":"2026-02-01T23:28:47.9127761-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:28:48.0257054-03:00","@version":"1","message":"Salvando orcamento: 24586505-fc13-4ed4-b921-e66161adc52c","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.0267042-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento com status "PENDENTE"  # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoComStatus(java.lang.String)
{"timestamp":"2026-02-01T23:28:48.0302232-03:00","@version":"1","message":"Buscando orcamento por id: 24586505-fc13-4ed4-b921-e66161adc52c","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.0312386-03:00","@version":"1","message":"findOne using query: { \"id\" : \"24586505-fc13-4ed4-b921-e66161adc52c\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.0342342-03:00","@version":"1","message":"Salvando orcamento: 24586505-fc13-4ed4-b921-e66161adc52c","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.0352362-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando o cliente rejeita o orþamento                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.clienteRejeitaOrcamento()
  EntÒo o status deve mudar para "REJEITADO"          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.statusDeveMudarPara(java.lang.String)
  E o evento "ORCAMENTO_REJEITADO" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E o motivo da rejeiþÒo deve estar registrado        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.motivoDaRejeicaoDeveEstarRegistrado()
{"timestamp":"2026-02-01T23:28:48.0432338-03:00","@version":"1","message":"Finished test case ValidaþÒo - Orþamento Rejeitado pelo Cliente","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.0442341-03:00","@version":"1","message":"Executing test case ValidaþÒo - Falha no Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.0457454-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:48.0477589-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: ValidaþÒo - Falha no Pagamento                # features/saga_orcamento.feature:79
{"timestamp":"2026-02-01T23:28:48.0626103-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada     # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:28:48.1786042-03:00","@version":"1","message":"Salvando orcamento: 30d5e805-5361-49f2-9511-916832306296","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.1786042-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que existe um orþamento aprovado                # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queExisteUmOrcamentoAprovado()
  E a execuþÒo foi concluÝda                           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aExecucaoFoiConcluida()
  Quando o processamento de pagamento falha            # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.oProcessamentoDePagamentoFalha()
  EntÒo o evento "PAGAMENTO_FALHOU" deve ser publicado # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.eventoDeveSerPublicado(java.lang.String)
  E o orþamento deve manter o status "APROVADO"        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveManterOStatus(java.lang.String)
  E o motivo da falha deve estar registrado            # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.motivoDaFalhaDeveEstarRegistrado()
  E um alerta deve ser enviado para o gerente          # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.umAlertaDeveSerEnviadoParaOGerente()
{"timestamp":"2026-02-01T23:28:48.1851366-03:00","@version":"1","message":"Finished test case ValidaþÒo - Falha no Pagamento","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.1861346-03:00","@version":"1","message":"Executing test case Hist¾rico - Rastreamento de Mudanþas de Status","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.1871368-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:48.1891344-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Hist¾rico - Rastreamento de Mudanþas de Status # features/saga_orcamento.feature:88
{"timestamp":"2026-02-01T23:28:48.200212-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel            # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada      # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:28:48.3052284-03:00","@version":"1","message":"Salvando orcamento: ba2a1c07-2011-4e24-8791-8f405ae67bbf","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.3065002-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, valorTotal, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que um orþamento passou por todo o ciclo         # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queUmOrcamentoPassouPorTodoCiclo()
  Quando eu consulto o hist¾rico do orþamento           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.euConsultoOHistoricoDoOrcamento()
  EntÒo deve haver registros de:                        # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.deveHaverRegistrosDe(io.cucumber.datatable.DataTable)
    | statusAnterior | statusNovo | motivo               |
    | null           | PENDENTE   | Orþamento criado     |
    | PENDENTE       | PENDENTE   | Diagn¾stico recebido |
    | PENDENTE       | APROVADO   | Cliente aprovou      |
    | APROVADO       | CONFIRMADO | Pagamento processado |
  E cada registro deve ter timestamp                    # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.cadaRegistroDeveTerTimestamp()
{"timestamp":"2026-02-01T23:28:48.3158727-03:00","@version":"1","message":"Finished test case Hist¾rico - Rastreamento de Mudanþas de Status","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.3173945-03:00","@version":"1","message":"Executing test case Saga Completo - Happy Path do Billing","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.3194177-03:00","@version":"1","message":"Could not detect default configuration classes for test class [br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps]: SagaOrcamentoSteps does not declare any static, non-private, non-final, nested classes annotated with @Configuration.","logger":"org.springframework.test.context.support.AnnotationConfigContextLoaderUtils","thread":"main","level":"INFO","level_value":20000}
{"timestamp":"2026-02-01T23:28:48.3214192-03:00","@version":"1","message":"Found @SpringBootConfiguration br.com.grupo99.billingservice.BillingServiceApplication for test class br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps","logger":"org.springframework.boot.test.context.SpringBootTestContextBootstrapper","thread":"main","level":"INFO","level_value":20000}

Cenßrio: Saga Completo - Happy Path do Billing               # features/saga_orcamento.feature:99
{"timestamp":"2026-02-01T23:28:48.3374281-03:00","@version":"1","message":"Remove using query: {} in collection: orcamentos.","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o Billing Service estß disponÝvel                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queBillingServiceEstaDisponivel()
  E a fila "billing-events-queue" estß configurada           # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.aFilaEstaConfigurada(java.lang.String)
{"timestamp":"2026-02-01T23:28:48.4429615-03:00","@version":"1","message":"Salvando orcamento: d0dbf5c3-2418-45ad-bb66-c8d689c5b82b","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.4439667-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Dado que o evento "OS_CRIADA" foi recebido                 # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.queOEventoFoiRecebido(java.lang.String)
{"timestamp":"2026-02-01T23:28:48.4481401-03:00","@version":"1","message":"Buscando orcamento por id: d0dbf5c3-2418-45ad-bb66-c8d689c5b82b","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.4491728-03:00","@version":"1","message":"findOne using query: { \"id\" : \"d0dbf5c3-2418-45ad-bb66-c8d689c5b82b\"} fields: Document{{}} for class: class br.com.grupo99.billingservice.infrastructure.persistence.entity.OrcamentoEntity in collection: orcamentos","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.4512548-03:00","@version":"1","message":"Salvando orcamento: d0dbf5c3-2418-45ad-bb66-c8d689c5b82b","logger":"br.com.grupo99.billingservice.infrastructure.persistence.adapter.OrcamentoRepositoryAdapter","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.4521791-03:00","@version":"1","message":"Saving Document containing fields: [_id, osId, status, itens, historico, updatedAt, _class]","logger":"org.springframework.data.mongodb.core.MongoTemplate","thread":"main","level":"DEBUG","level_value":10000}
  Quando todos os passos do Saga sÒo executados com sucesso: # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.todosOsPassosDoSagaSaoExecutadosComSucesso(io.cucumber.datatable.DataTable)
    | passo | evento                | status_resultado |
    | 1     | OS_CRIADA             | PENDENTE         |
    | 2     | DIAGNOSTICO_CONCLUIDO | PENDENTE         |
    | 3     | Cliente aprova        | APROVADO         |
    | 4     | EXECUCAO_FINALIZADA   | APROVADO         |
    | 5     | Processar pagamento   | CONFIRMADO       |
  EntÒo o orþamento deve estar com status "CONFIRMADO"       # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.orcamentoDeveEstarComStatus(java.lang.String)
  E todos os eventos devem ter sido publicados               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.todosOsEventosDevemTerSidoPublicados()
  E nenhuma compensaþÒo deve ter sido acionada               # br.com.grupo99.billingservice.bdd.SagaOrcamentoSteps.nenhumaCompensacaoDeveTerSidoAcionada()
{"timestamp":"2026-02-01T23:28:48.4610848-03:00","@version":"1","message":"Finished test case Saga Completo - Happy Path do Billing","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.4620844-03:00","@version":"1","message":"Running after all hooks","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.4630853-03:00","@version":"1","message":"Finishing test run","logger":"io.cucumber.junit.platform.engine.CucumberEngineExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
{"timestamp":"2026-02-01T23:28:48.4640849-03:00","@version":"1","message":"Sending test run finished event","logger":"io.cucumber.core.runtime.CucumberExecutionContext","thread":"main","level":"DEBUG","level_value":10000}
