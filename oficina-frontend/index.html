<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oficina Digital ‚Äî Test Console</title>
    <meta name="description" content="Console de testes para todos os microservi√ßos do projeto Oficina Digital">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span class="logo-icon">‚öôÔ∏è</span>
                <span class="logo-text">Oficina<br><small>Digital</small></span>
            </div>
        </div>
        <nav class="sidebar-nav">
            <button class="nav-item active" data-panel="os" id="nav-os">
                <span class="nav-icon">üìã</span>
                <span class="nav-label">Ordens de Servi√ßo</span>
                <span class="nav-badge" id="badge-os">OS</span>
            </button>
            <button class="nav-item" data-panel="billing" id="nav-billing">
                <span class="nav-icon">üí∞</span>
                <span class="nav-label">Faturamento</span>
                <span class="nav-badge" id="badge-billing">BIL</span>
            </button>
            <button class="nav-item" data-panel="execution" id="nav-execution">
                <span class="nav-icon">üîß</span>
                <span class="nav-label">Execu√ß√£o</span>
                <span class="nav-badge" id="badge-execution">EXE</span>
            </button>
            <div class="nav-divider"></div>
            <button class="nav-item" data-panel="saga" id="nav-saga">
                <span class="nav-icon">üîÑ</span>
                <span class="nav-label">Saga Flow</span>
            </button>
            <button class="nav-item" data-panel="settings" id="nav-settings">
                <span class="nav-icon">‚ö°</span>
                <span class="nav-label">API Config</span>
            </button>
        </nav>
        <div class="sidebar-footer">
            <button class="toggle-console" id="toggleConsole" title="Toggle HTTP Console">
                <span>üì°</span>
                <span class="console-count" id="consoleCount">0</span>
            </button>
        </div>
    </aside>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN CONTENT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="main-content">
        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ OS Service Panel ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <section class="panel active" id="panel-os">
            <div class="panel-header">
                <h1><span class="accent-os">‚óè</span> Ordens de Servi√ßo</h1>
                <span class="service-tag">os-service :8081</span>
            </div>

            <div class="panel-grid">
                <!-- Criar OS -->
                <div class="card">
                    <h3>‚ûï Criar Ordem de Servi√ßo</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Cliente ID (UUID)</label>
                            <input type="text" id="os-clienteId" placeholder="ex: 550e8400-e29b-41d4-a716-446655440000">
                            <button class="btn-small btn-gen" onclick="App.OS.generateUUID('os-clienteId')">üé≤
                                Gerar</button>
                        </div>
                        <div class="form-group">
                            <label>Ve√≠culo ID (UUID)</label>
                            <input type="text" id="os-veiculoId" placeholder="ex: 550e8400-e29b-41d4-a716-446655440001">
                            <button class="btn-small btn-gen" onclick="App.OS.generateUUID('os-veiculoId')">üé≤
                                Gerar</button>
                        </div>
                        <div class="form-group full-width">
                            <label>Descri√ß√£o do Problema</label>
                            <textarea id="os-descricao" rows="2"
                                placeholder="Descreva o problema do ve√≠culo..."></textarea>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="App.OS.criar()">Criar OS</button>
                </div>

                <!-- Buscar OS -->
                <div class="card">
                    <h3>üîç Buscar / Listar</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Buscar por ID</label>
                            <input type="text" id="os-searchId" placeholder="UUID da OS">
                        </div>
                        <div class="form-group">
                            <label>Filtrar por Status</label>
                            <select id="os-filterStatus">
                                <option value="">Todos</option>
                                <option value="RECEBIDA">Recebida</option>
                                <option value="EM_DIAGNOSTICO">Em Diagn√≥stico</option>
                                <option value="AGUARDANDO_APROVACAO">Aguardando Aprova√ß√£o</option>
                                <option value="AGUARDANDO_PAGAMENTO">Aguardando Pagamento</option>
                                <option value="EM_EXECUCAO">Em Execu√ß√£o</option>
                                <option value="FINALIZADA">Finalizada</option>
                                <option value="ENTREGUE">Entregue</option>
                                <option value="CANCELADA">Cancelada</option>
                            </select>
                        </div>
                    </div>
                    <div class="btn-row">
                        <button class="btn btn-secondary" onclick="App.OS.buscarPorId()">Buscar por ID</button>
                        <button class="btn btn-secondary" onclick="App.OS.listarTodas()">Listar Todas</button>
                        <button class="btn btn-secondary" onclick="App.OS.buscarPorStatus()">Filtrar Status</button>
                    </div>
                </div>

                <!-- Resultado -->
                <div class="card full-width">
                    <h3>üìä Resultado</h3>
                    <div id="os-results" class="results-area">
                        <p class="placeholder">Nenhum resultado ainda. Use os controles acima.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ Billing Panel ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <section class="panel" id="panel-billing">
            <div class="panel-header">
                <h1><span class="accent-billing">‚óè</span> Faturamento</h1>
                <span class="service-tag">billing-service :8082</span>
            </div>

            <!-- Sub-tabs -->
            <div class="sub-tabs">
                <button class="sub-tab active" data-subtab="orcamentos" onclick="App.Billing.switchTab('orcamentos')">üíµ
                    Or√ßamentos</button>
                <button class="sub-tab" data-subtab="pagamentos" onclick="App.Billing.switchTab('pagamentos')">üí≥
                    Pagamentos</button>
            </div>

            <!-- Or√ßamentos -->
            <div class="sub-panel active" id="subtab-orcamentos">
                <div class="panel-grid">
                    <div class="card">
                        <h3>‚ûï Criar Or√ßamento</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>OS ID (UUID)</label>
                                <input type="text" id="orc-osId" placeholder="ID da Ordem de Servi√ßo">
                            </div>
                            <div class="form-group">
                                <label>Observa√ß√£o</label>
                                <input type="text" id="orc-observacao" placeholder="Opcional">
                            </div>
                        </div>
                        <div class="items-section">
                            <h4>Itens do Or√ßamento</h4>
                            <div id="orc-items">
                                <div class="item-row">
                                    <input type="text" placeholder="Descri√ß√£o" class="item-desc">
                                    <input type="number" placeholder="Valor" class="item-valor" step="0.01">
                                    <input type="number" placeholder="Qtd" class="item-qty" value="1" min="1">
                                    <button class="btn-icon btn-remove" onclick="this.parentElement.remove()">‚úï</button>
                                </div>
                            </div>
                            <button class="btn btn-ghost" onclick="App.Billing.addItem()">+ Adicionar Item</button>
                        </div>
                        <button class="btn btn-primary" onclick="App.Billing.criarOrcamento()">Criar Or√ßamento</button>
                    </div>

                    <div class="card">
                        <h3>üîç Buscar Or√ßamento</h3>
                        <div class="form-group">
                            <label>Or√ßamento ID (UUID)</label>
                            <input type="text" id="orc-searchId" placeholder="UUID do or√ßamento">
                        </div>
                        <div class="btn-row">
                            <button class="btn btn-secondary" onclick="App.Billing.buscarOrcamento()">Buscar</button>
                        </div>
                        <div class="action-buttons" id="orc-actions" style="display:none;">
                            <button class="btn btn-success" onclick="App.Billing.aprovarOrcamento()">‚úÖ Aprovar</button>
                            <button class="btn btn-warning" onclick="App.Billing.rejeitarOrcamento()">‚ùå
                                Rejeitar</button>
                            <button class="btn btn-danger" onclick="App.Billing.cancelarOrcamento()">üóë
                                Cancelar</button>
                        </div>
                    </div>

                    <div class="card full-width">
                        <h3>üìä Resultado</h3>
                        <div id="orc-results" class="results-area">
                            <p class="placeholder">Nenhum resultado ainda.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pagamentos -->
            <div class="sub-panel" id="subtab-pagamentos">
                <div class="panel-grid">
                    <div class="card">
                        <h3>‚ûï Registrar Pagamento</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Or√ßamento ID</label>
                                <input type="text" id="pag-orcamentoId" placeholder="UUID do or√ßamento">
                            </div>
                            <div class="form-group">
                                <label>OS ID</label>
                                <input type="text" id="pag-osId" placeholder="UUID da OS">
                            </div>
                            <div class="form-group">
                                <label>Valor (R$)</label>
                                <input type="number" id="pag-valor" placeholder="0.00" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>Forma de Pagamento</label>
                                <select id="pag-forma">
                                    <option value="PIX">PIX</option>
                                    <option value="CARTAO_CREDITO">Cart√£o de Cr√©dito</option>
                                    <option value="CARTAO_DEBITO">Cart√£o de D√©bito</option>
                                    <option value="BOLETO">Boleto</option>
                                    <option value="DINHEIRO">Dinheiro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Email do Pagador</label>
                                <input type="email" id="pag-email" placeholder="payer@email.com">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="App.Billing.registrarPagamento()">Registrar
                            Pagamento</button>
                    </div>

                    <div class="card">
                        <h3>üîß A√ß√µes de Pagamento</h3>
                        <div class="form-group">
                            <label>Pagamento ID (UUID)</label>
                            <input type="text" id="pag-actionId" placeholder="UUID do pagamento">
                        </div>
                        <div class="form-group">
                            <label>Motivo (para estorno)</label>
                            <input type="text" id="pag-motivo" placeholder="Opcional">
                        </div>
                        <div class="btn-row">
                            <button class="btn btn-success" onclick="App.Billing.confirmarPagamento()">‚úÖ
                                Confirmar</button>
                            <button class="btn btn-warning" onclick="App.Billing.estornarPagamento()">‚Ü©Ô∏è
                                Estornar</button>
                            <button class="btn btn-danger" onclick="App.Billing.cancelarPagamento()">üóë
                                Cancelar</button>
                        </div>
                    </div>

                    <div class="card">
                        <h3>üîî Simular Webhook MP</h3>
                        <div class="form-group">
                            <label>Payment ID (Mercado Pago)</label>
                            <input type="text" id="webhook-paymentId" placeholder="ID num√©rico do pagamento MP">
                        </div>
                        <button class="btn btn-accent" onclick="App.Billing.simularWebhook()">Enviar Webhook</button>
                    </div>

                    <div class="card full-width">
                        <h3>üìä Resultado</h3>
                        <div id="pag-results" class="results-area">
                            <p class="placeholder">Nenhum resultado ainda.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ Execution Panel ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <section class="panel" id="panel-execution">
            <div class="panel-header">
                <h1><span class="accent-execution">‚óè</span> Execu√ß√£o</h1>
                <span class="service-tag">execution-service :8083</span>
            </div>

            <div class="panel-grid">
                <div class="card">
                    <h3>‚ûï Criar Execu√ß√£o de OS</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>OS ID (UUID)</label>
                            <input type="text" id="exec-osId" placeholder="ID da Ordem de Servi√ßo">
                        </div>
                        <div class="form-group">
                            <label>Or√ßamento ID (UUID)</label>
                            <input type="text" id="exec-orcamentoId" placeholder="ID do or√ßamento aprovado">
                        </div>
                        <div class="form-group">
                            <label>Mec√¢nico Respons√°vel</label>
                            <input type="text" id="exec-mecanico" placeholder="Nome do mec√¢nico">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="App.Execution.criar()">Criar Execu√ß√£o</button>
                </div>

                <div class="card">
                    <h3>üîç Buscar / Filtrar</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Buscar por ID</label>
                            <input type="text" id="exec-searchId" placeholder="UUID da execu√ß√£o">
                        </div>
                        <div class="form-group">
                            <label>Buscar por OS ID</label>
                            <input type="text" id="exec-searchOsId" placeholder="UUID da OS">
                        </div>
                        <div class="form-group">
                            <label>Filtrar por Status</label>
                            <select id="exec-filterStatus">
                                <option value="">Todos</option>
                                <option value="AGUARDANDO_INICIO">Aguardando In√≠cio</option>
                                <option value="EM_ANDAMENTO">Em Andamento</option>
                                <option value="CONCLUIDA">Conclu√≠da</option>
                                <option value="CANCELADA">Cancelada</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Buscar por Mec√¢nico</label>
                            <input type="text" id="exec-searchMecanico" placeholder="Nome do mec√¢nico">
                        </div>
                    </div>
                    <div class="btn-row">
                        <button class="btn btn-secondary" onclick="App.Execution.buscarPorId()">Por ID</button>
                        <button class="btn btn-secondary" onclick="App.Execution.buscarPorOsId()">Por OS</button>
                        <button class="btn btn-secondary" onclick="App.Execution.listarTodas()">Listar Todas</button>
                        <button class="btn btn-secondary" onclick="App.Execution.buscarPorStatus()">Por Status</button>
                        <button class="btn btn-secondary" onclick="App.Execution.buscarPorMecanico()">Por
                            Mec√¢nico</button>
                    </div>
                </div>

                <div class="card">
                    <h3>üé¨ A√ß√µes de Execu√ß√£o</h3>
                    <div class="form-group">
                        <label>Execu√ß√£o ID (UUID)</label>
                        <input type="text" id="exec-actionId" placeholder="UUID da execu√ß√£o">
                    </div>
                    <div class="form-group">
                        <label>Observa√ß√µes / Motivo</label>
                        <input type="text" id="exec-obs" placeholder="Opcional">
                    </div>
                    <div class="btn-row">
                        <button class="btn btn-success" onclick="App.Execution.iniciar()">‚ñ∂Ô∏è Iniciar</button>
                        <button class="btn btn-accent" onclick="App.Execution.finalizar()">‚úÖ Finalizar</button>
                        <button class="btn btn-danger" onclick="App.Execution.cancelar()">‚ùå Cancelar</button>
                        <button class="btn btn-ghost" onclick="App.Execution.deletar()">üóë Deletar</button>
                    </div>
                </div>

                <div class="card full-width">
                    <h3>üìä Resultado</h3>
                    <div id="exec-results" class="results-area">
                        <p class="placeholder">Nenhum resultado ainda.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ Saga Flow Panel ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <section class="panel" id="panel-saga">
            <div class="panel-header">
                <h1><span class="accent-saga">‚óè</span> Saga Flow Visualization</h1>
                <span class="service-tag">cross-service</span>
            </div>
            <div class="card full-width">
                <div class="saga-flow">
                    <div class="saga-step" id="saga-step-1">
                        <div class="saga-icon">üìã</div>
                        <div class="saga-label">1. Criar OS</div>
                        <div class="saga-desc">OS Service</div>
                        <div class="saga-status">‚è≥ Pendente</div>
                    </div>
                    <div class="saga-arrow">‚Üí</div>
                    <div class="saga-step" id="saga-step-2">
                        <div class="saga-icon">üíµ</div>
                        <div class="saga-label">2. Or√ßamento</div>
                        <div class="saga-desc">Billing Service</div>
                        <div class="saga-status">‚è≥ Pendente</div>
                    </div>
                    <div class="saga-arrow">‚Üí</div>
                    <div class="saga-step" id="saga-step-3">
                        <div class="saga-icon">‚úÖ</div>
                        <div class="saga-label">3. Aprova√ß√£o</div>
                        <div class="saga-desc">Billing Service</div>
                        <div class="saga-status">‚è≥ Pendente</div>
                    </div>
                    <div class="saga-arrow">‚Üí</div>
                    <div class="saga-step" id="saga-step-4">
                        <div class="saga-icon">üí≥</div>
                        <div class="saga-label">4. Pagamento</div>
                        <div class="saga-desc">Billing Service</div>
                        <div class="saga-status">‚è≥ Pendente</div>
                    </div>
                    <div class="saga-arrow">‚Üí</div>
                    <div class="saga-step" id="saga-step-5">
                        <div class="saga-icon">üîß</div>
                        <div class="saga-label">5. Execu√ß√£o</div>
                        <div class="saga-desc">Execution Service</div>
                        <div class="saga-status">‚è≥ Pendente</div>
                    </div>
                    <div class="saga-arrow">‚Üí</div>
                    <div class="saga-step" id="saga-step-6">
                        <div class="saga-icon">üèÅ</div>
                        <div class="saga-label">6. Entrega</div>
                        <div class="saga-desc">OS Service</div>
                        <div class="saga-status">‚è≥ Pendente</div>
                    </div>
                </div>
                <div class="saga-controls">
                    <button class="btn btn-primary btn-large" onclick="App.Saga.executarFluxoCompleto()">üöÄ Executar
                        Fluxo Completo</button>
                    <button class="btn btn-ghost" onclick="App.Saga.resetar()">üîÑ Resetar</button>
                </div>
                <div id="saga-log" class="saga-log">
                    <p class="placeholder">Execute o fluxo para ver os logs aqui.</p>
                </div>
            </div>
        </section>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ Settings Panel ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <section class="panel" id="panel-settings">
            <div class="panel-header">
                <h1><span class="accent-settings">‚óè</span> API Configuration</h1>
                <span class="service-tag">settings</span>
            </div>
            <div class="panel-grid">
                <div class="card">
                    <h3>üåê URLs dos Servi√ßos</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>OS Service</label>
                            <input type="text" id="cfg-os-url" placeholder="http://localhost:8081">
                        </div>
                        <div class="form-group">
                            <label>Billing Service</label>
                            <input type="text" id="cfg-billing-url" placeholder="http://localhost:8082">
                        </div>
                        <div class="form-group">
                            <label>Execution Service</label>
                            <input type="text" id="cfg-execution-url" placeholder="http://localhost:8083">
                        </div>
                    </div>
                    <div class="btn-row">
                        <button class="btn btn-primary" onclick="App.Settings.save()">üíæ Salvar</button>
                        <button class="btn btn-ghost" onclick="App.Settings.reset()">üîÑ Resetar Padr√£o</button>
                    </div>
                </div>
                <div class="card">
                    <h3>üè• Health Check</h3>
                    <div id="health-results" class="health-grid">
                        <div class="health-item" id="health-os">
                            <span class="health-dot">‚óè</span>
                            <span>OS Service</span>
                            <span class="health-status">‚Äî</span>
                        </div>
                        <div class="health-item" id="health-billing">
                            <span class="health-dot">‚óè</span>
                            <span>Billing Service</span>
                            <span class="health-status">‚Äî</span>
                        </div>
                        <div class="health-item" id="health-execution">
                            <span class="health-dot">‚óè</span>
                            <span>Execution Service</span>
                            <span class="health-status">‚Äî</span>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="App.Settings.healthCheck()">üîç Verificar Sa√∫de</button>
                </div>
            </div>
        </section>
    </main>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HTTP CONSOLE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="http-console" id="httpConsole">
        <div class="console-header">
            <h3>üì° HTTP Console</h3>
            <div class="console-controls">
                <button class="btn-icon" onclick="App.Console.clear()" title="Limpar">üóë</button>
                <button class="btn-icon" id="consoleResizeBtn" onclick="App.Console.toggle()"
                    title="Expandir/Recolher">‚ñ≤</button>
            </div>
        </div>
        <div class="console-body" id="consoleBody">
            <div class="console-entries" id="consoleEntries">
                <p class="placeholder">As requisi√ß√µes HTTP aparecer√£o aqui.</p>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
</body>

</html>